<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js dark">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Kh√°i ni·ªám c∆° b·∫£n - Hjn4 Blog</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../theme/css/additional.css">

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "dark";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('dark')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="../../homepage.html">HOME - Huy Na</a></li><li class="chapter-item affix "><li class="part-title">AWS</li><li class="chapter-item "><a href="../../blogs/AWS/job.html">Requirements For Job</a></li><li class="chapter-item "><a href="../../blogs/AWS/EC2.html">Computing Services - EC2</a></li><li class="chapter-item "><a href="../../blogs/AWS/IAM.html">Identity and Access Management -IAM</a></li><li class="chapter-item "><a href="../../blogs/AWS/S3.html">Simple Storage Service - S3</a></li><li class="chapter-item "><a href="../../blogs/AWS/LoadBalancing-Autoscaling.html">Load Balancing and Autoscaling</a></li><li class="chapter-item "><a href="../../blogs/AWS/RDS.html">Relational Database Service - RDS</a></li><li class="chapter-item "><a href="../../blogs/AWS/DynamoDB.html">Database Services - No SQL - DynamoDB</a></li><li class="chapter-item "><a href="../../blogs/AWS/Lambda.html">Serverless Lambda</a></li><li class="chapter-item "><a href="../../blogs/AWS/VPC.html">Networking Service - VPC, Peering, Endpoint</a></li><li class="chapter-item "><a href="../../blogs/AWS/Gateway_Cognito.html">API Gateway & Cognito</a></li><li class="chapter-item "><a href="../../blogs/AWS/CloudFront.html">Content Delivery Service (CDN) - CloudFront</a></li><li class="chapter-item "><a href="../../blogs/AWS/Route_53.html">Domain Name System - Route 53</a></li><li class="chapter-item "><a href="../../blogs/AWS/Monitor_Auditing.html">Monitoring and Auditing - CloudWatch, CloudTrail</a></li><li class="chapter-item "><a href="../../blogs/AWS/Mess.html">Messaging Service - SNS, SQS, SES</a></li><li class="chapter-item "><a href="../../blogs/AWS/Event_Bridge.html">Event Bridge</a></li><li class="chapter-item "><a href="../../blogs/AWS/Elastic_Beanstalk.html">Elastic Beanstalk</a></li><li class="chapter-item "><a href="../../blogs/AWS/Container_Service.html">Container Service - ECS, ECR</a></li><li class="chapter-item "><a href="../../blogs/AWS/IAC_CloudFormation.html">Infra as Code - CloudFormation</a></li><li class="chapter-item "><a href="../../blogs/AWS/Backup_Recovery.html">Backup and Recovery</a></li><li class="chapter-item "><a href="../../blogs/AWS/Sec.html">Security Services</a></li><li class="chapter-item affix "><li class="part-title">Kubernetes</li><li class="chapter-item expanded "><a href="../../blogs/Kubernetes/session1.html" class="active">Kh√°i ni·ªám c∆° b·∫£n</a></li><li class="chapter-item affix "><li class="part-title">Linux + Git</li><li class="chapter-item "><a href="../../blogs/Linux/bandit.html">Bandit challenge</a></li><li class="chapter-item "><a href="../../blogs/Linux/command_session_1.html">Command session 1</a></li><li class="chapter-item "><a href="../../blogs/Linux/git_command.html">Git command</a></li><li class="chapter-item "><a href="../../blogs/Linux/ssh.html">SSH</a></li><li class="chapter-item affix "><li class="part-title">Docker</li><li class="chapter-item "><a href="../../blogs/Docker/tips.html">Some docker tips for CTF</a></li><li class="chapter-item "><a href="../../blogs/Docker/get_started.html">Basic Docker</a></li><li class="chapter-item "><a href="../../blogs/Docker/image_container.html">Images & Containers: The Core Building Blocks</a></li><li class="chapter-item "><a href="../../blogs/Docker/dockerfile_write.html">Dockerfile</a></li><li class="chapter-item "><a href="../../blogs/Docker/docker_network.html">Docker Network</a></li><li class="chapter-item "><a href="../../blogs/Docker/Volume.html">Volume</a></li><li class="chapter-item "><a href="../../blogs/Docker/Docker_Compose.html">Docker Compose</a></li><li class="chapter-item affix "><li class="part-title">Jenkins</li><li class="chapter-item "><a href="../../blogs/Jenkins/install_by_docker.html">Install Jenkins By Docker</a></li><li class="chapter-item "><a href="../../blogs/Jenkins/link_git_jenkins.html">Link git with jenkins</a></li><li class="chapter-item "><a href="../../blogs/Jenkins/pipline_github_jenkins.html">Pipeline jenkinsfile with github</a></li><li class="chapter-item "><a href="../../blogs/Jenkins/gitlab_jenkins.html">Link gitlab with Jenkins</a></li><li class="chapter-item "><a href="../../blogs/Jenkins/gitlab_dockerhub.html">Gitlab-dockerhub-pipeline</a></li><li class="chapter-item affix "><li class="part-title">Python</li><li class="chapter-item "><a href="../../blogs/Python/RE.html">Regular Expression</a></li><li class="chapter-item "><a href="../../blogs/Python/Automation_1.html">Automation with Python 1</a></li><li class="chapter-item affix "><li class="part-title">Bash script</li><li class="chapter-item "><a href="../../blogs/Bash_script/Variables_Environment.html">Shell Variables and Environment</a></li><li class="chapter-item "><a href="../../blogs/Bash_script/Conditionals_Execution.html">Conditionals Execution</a></li><li class="chapter-item "><a href="../../blogs/Bash_script/Bash_Loops.html">Bash Loops & Function</a></li><li class="chapter-item "><a href="../../blogs/Bash_script/Shell_Redirection.html">Shell Redirection & Pipes and Filters</a></li><li class="chapter-item "><a href="../../blogs/Bash_script/Interactive_Scripts.html">Interactive Scripts</a></li><li class="chapter-item affix "><li class="part-title">System and Network Administration</li><li class="chapter-item "><a href="../../blogs/Network/basic_network_1.html">Basic Network 1</a></li><li class="chapter-item affix "><li class="part-title">PWN</li><li class="chapter-item "><a href="../../blogs/PWN/Emporium_ROP.html">Rop Emporium</a></li><li class="chapter-item "><a href="../../blogs/PWN/pwnableTW.html">Pwnable.tw</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pico_CTF.html">Pwn_PicoCTF</a></li><li class="chapter-item "><a href="../../blogs/PWN/PWN_from_blabla.html">Pwn from blabla</a></li><li class="chapter-item affix "><li class="part-title">ROP Emporium</li><li class="chapter-item "><a href="../../blogs/PWN/ROP_Emporium/ret2win_challenge.html">ret2win - chall 1</a></li><li class="chapter-item "><a href="../../blogs/PWN/ROP_Emporium/split_challenge.html">split - chall 2</a></li><li class="chapter-item "><a href="../../blogs/PWN/ROP_Emporium/callme_challenge.html">callme - chall 3</a></li><li class="chapter-item "><a href="../../blogs/PWN/ROP_Emporium/write4_challenge.html">write4 - chall 4</a></li><li class="chapter-item "><a href="../../blogs/PWN/ROP_Emporium/badchars_challenge.html">badchars - chall 5</a></li><li class="chapter-item "><a href="../../blogs/PWN/ROP_Emporium/pivot_challenge.html">pivot - chall 7</a></li><li class="chapter-item "><a href="../../blogs/PWN/ROP_Emporium/ret2csu_challenge.html">ret2csu - chall 8</a></li><li class="chapter-item affix "><li class="part-title">Pwnable.tw</li><li class="chapter-item "><a href="../../blogs/PWN/Pwnable_tw/start_challenge.html">start</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwnable_tw/orw_challenge.html">orw</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwnable_tw/calc_challenge.html">calc</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwnable_tw/3x17_challenge.html">3x17</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwnable_tw/dubblesort_challenge.html">dubblesort</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwnable_tw/silver_bullet_challenge.html">silver_bullet</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwnable_tw/applestore_challenge.html">applestore</a></li><li class="chapter-item affix "><li class="part-title">Pwn_Pico</li><li class="chapter-item "><a href="../../blogs/PWN/Pwn_Pico/herelibc_challenge.html">Here's a libc</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwn_Pico/hijacking_challenge.html">hijacking</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwn_Pico/fermat_strins_challenge.html">fermat_strings</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwn_Pico/Guessgame_challenge.html">Guessgame</a></li><li class="chapter-item affix "><li class="part-title">Pwn from blabla</li><li class="chapter-item "><a href="../../blogs/PWN/Pwn_from_blabla/handy_shellcode_challenge.html">handy shellcode</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwn_from_blabla/pwn07_challenge.html">pwn07 - ret2libc vs ROP</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwn_from_blabla/got_formatstring_challenge.html">GOT overwrite with format string</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwn_from_blabla/training.html">training</a></li><li class="chapter-item affix "><li class="part-title">Assembly</li><li class="chapter-item "><a href="../../blogs/Assembly/ASM.html">ASM</a></li><li class="chapter-item "><a href="../../blogs/Assembly/Session_1.html">Session 1</a></li><li class="chapter-item "><a href="../../blogs/Assembly/Session_2.html">Session 2</a></li><li class="chapter-item "><a href="../../blogs/Assembly/Session_3.html">Session 3</a></li><li class="chapter-item affix "><li class="part-title">RE_PicoCTF</li><li class="chapter-item "><a href="../../blogs/RE/RE.html">RE</a></li><li class="chapter-item "><a href="../../blogs/RE_Pico/ARMssembly_0.html">ARMssembly 0</a></li><li class="chapter-item "><a href="../../blogs/RE_Pico/ARMssembly_1.html">ARMssembly 1</a></li><li class="chapter-item "><a href="../../blogs/RE_Pico/ARMssembly_2.html">ARMssembly 2</a></li><li class="chapter-item affix "><li class="part-title">Documents from everywhere</li><li class="chapter-item "><a href="../../blogs/Documents/troubleshooting.html">Troubleshooting</a></li><li class="chapter-item "><a href="../../blogs/Documents/study.html">Study</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Hjn4 Blog</h1>

                    <div class="right-buttons">

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="kh√°i-ni·ªám-c∆°-b·∫£n"><a class="header" href="#kh√°i-ni·ªám-c∆°-b·∫£n">Kh√°i ni·ªám c∆° b·∫£n</a></h1>
<h2 id="cluster-architecture"><a class="header" href="#cluster-architecture">Cluster Architecture</a></h2>
<p><img src="./image/ss1_cluster.png" alt="alt text" /></p>
<p>Cluster g·ªìm 2 th√†nh ph·∫ßn:</p>
<ul>
<li>Control Plane: C√≥ nhi·ªám v·ª• ƒëi·ªÅu ph·ªëi to√†n b·ªô ho·∫°t ƒë·ªông c·ªßa cluster</li>
<li>Data Plane:
<ul>
<li>Gi√∫p tri·ªÉn khai service</li>
<li>G·ªìm nhi·ªÅu worker node</li>
</ul>
</li>
</ul>
<p><img src="./image/k8s_architect.png" alt="alt text" /></p>
<h3 id="control-plane"><a class="header" href="#control-plane">Control Plane</a></h3>
<ul>
<li>
<p><a href="https://kubernetes.io/docs/reference/command-line-tools-reference/">Reference</a></p>
</li>
<li>
<p><strong>kube-apiserver:</strong>: Cho ph√©p qu·∫£n l√Ω API trong cluster, khi client (CLI interface), Agents, g·ªçi ƒë·∫øn cluster, c·∫ßn l·∫•y th√¥ng tin trong cluster th√¨ s·∫Ω g·ªçi ƒë·∫øn API Server n√†y. API Server s·∫Ω ti·∫øn h√†nh x√°c th·ª±c, ph√¢n quy·ªÅn. M·ªçi th·ª© ƒë·ªÅu ph·∫£i t∆∞∆°ng t√°c qua API Server</p>
</li>
<li>
<p><strong>kube-controller-manager</strong>: B·∫•t k√¨ m·ªôt controler n√†o trong cluster k8s ƒë·ªÅu l√†m nhi·ªám v·ª• monitor m·ªôt ƒë·ªëi t∆∞·ª£ng n√†o ƒë√≥ r·ªìi ƒë∆∞a ra h√†nh ƒë·ªông t∆∞∆°ng ·ª©ng. Example: qu·∫£n l√Ω replicaset</p>
</li>
<li>
<p><strong>Scheduler</strong>: Khi m√† ta mu·ªën ch·∫°y 1 service, th√¨ scheduler s·∫Ω ti·∫øn h√†nh t√¨m c√°c Node h·ª£p l·ªá (th·ªèa m·∫£n c√°c r√†ng bu·ªôc v√† c√≥ s·∫µn c√°c t√†i nguy√™n c·∫ßn thi·∫øt). Scheduler s·∫Ω rank c√°c valid nodes r·ªìi g√°n Pod v·ªõi node h·ª£p l·ªá</p>
</li>
<li>
<p><strong>etcd</strong>: Nh∆∞ l√† 1 database ch·ª©a to√†n b·ªô data c·ªßa cluster (objects, resources,...) ph·ª•c v·ª• cho m·ª•c ƒë√≠ch truy c·∫≠p v√† tra c·ª©u</p>
</li>
<li>
<p><strong>cloud-controller-manager</strong>(<em>optional</em>): Khi m√† ta t·ª± t·∫°o ri√™ng 1 c√°i cluster k8s nh∆∞ng l·∫°i mu·ªën s·ª≠ d·ª•ng c√°c t√†i nguy√™n nh∆∞ (EC2, S3, ...) tr√™n cloud n√≥i chung, AWS n√≥i ri√™ng th√¨ ta c·∫ßn ƒë·∫øn CCM ƒë·ªÉ c√≥ th·ªÉ t∆∞∆°ng t√°c v·ªõi c√°c service c·ªßa cloud
<img src="./image/k8s_maternode.png" alt="alt text" /></p>
</li>
</ul>
<h3 id="data-plane"><a class="header" href="#data-plane">Data Plane</a></h3>
<p>G·ªìm nhi·ªÅu woker node, trong c√°c woker node th√¨ c√≥ 2 th√†nh ph·∫ßn ch√≠nh:</p>
<ul>
<li><strong>Kubelet</strong>: Nh∆∞ l√† 1 Agent c√≥ tr√°ch nhi·ªám checkin c√°c resource ch·∫°y tr√™n woker node(Pod,...) c·∫≠p nh·∫≠t th√¥ng tin l√™n API Server, nh·∫≠n l·ªánh t·ª´ API Server v√† tri·ªÉn khai tr√™n woker node. ƒê·∫£m b·∫£o c√°c containers tr√™n c√°c Pod ch·∫°y ·ªïn ƒë·ªãnh</li>
<li><strong>Kube-Proxy</strong>: T·∫°o ra c√°c rule ƒë·ªÉ instance, pod connect v·ªõi nhau</li>
<li><strong>Container Runtime</strong>: Container runtime l√† m·ªôt ph·∫ßn m·ªÅm ch·ªãu tr√°ch nhi·ªám cho vi·ªác qu·∫£n l√Ω v√† ch·∫°y c√°c container. N√≥ l√† m·ªôt th√†nh ph·∫ßn c·ª• th·ªÉ c·ªßa h·ªá th·ªëng c√≥ nhi·ªám v·ª• th·ª±c hi·ªán c√°c ch·ª©c nƒÉng nh∆∞ t·∫°o, kh·ªüi ƒë·ªông, d·ª´ng v√† x√≥a container. M·ªôt s·ªë container runtime ph·ªï bi·∫øn trong c·ªông ƒë·ªìng Kubernetes bao g·ªìm Docker, containerd, rkt, v√† CRI-O.</li>
<li><strong>Container Runtime Interface</strong>: CRI l√† m·ªôt giao di·ªán chu·∫©n ƒë·ªÉ t∆∞∆°ng t√°c gi·ªØa Kubernetes v√† c√°c container runtime. N√≥ gi√∫p t√°ch bi·ªát logic qu·∫£n l√Ω container c·ªßa Kubernetes v·ªõi container runtime c·ª• th·ªÉ, cho ph√©p linh ho·∫°t trong vi·ªác thay ƒë·ªïi ho·∫∑c s·ª≠ d·ª•ng nhi·ªÅu container runtime kh√°c nhau.</li>
</ul>
<h2 id="yaml"><a class="header" href="#yaml">YAML</a></h2>
<ul>
<li>Example Json:</li>
</ul>
<pre><code class="language-py">data = {
  &quot;id&quot;: &quot;AWcvsjx864kVeDHDi2gB&quot;,
  &quot;timestamp&quot;: 1542693469197,
  &quot;description&quot;: &quot;This network device leaf2.abc.inc is unreachable from controller. The device role is ACCESS.&quot;,
  &quot;actualServiceId&quot;: &quot;10.10.20.82&quot;,
  &quot;assignedTo&quot;: &quot;&quot;,
  &quot;enrichmentInfo&quot;: {
    &quot;issueDetails&quot;: {
      &quot;issue&quot;: [
        {
          &quot;issueId&quot;: &quot;AWcvsjx864kVeDHDi2gB&quot;,
          &quot;issuePriority&quot;: &quot;&quot;,
          &quot;issueSummary&quot;: &quot;Network Device 10.10.20.82 Is Unreachable From Controller&quot;,
          &quot;issueTimestamp&quot;: 1542693469197,
          &quot;suggestedActions&quot;: [
            {
              &quot;message&quot;: &quot;From the controller, verify whether the last hop is reachable.&quot;,
              &quot;steps&quot;: []
            },
            {
              &quot;message&quot;: &quot;Verify access to the device.&quot;,
              &quot;steps&quot;: []
            }
          ],
          &quot;impactedHosts&quot;: [
            {
              &quot;hostName&quot;: &quot;DUT&quot;,
              &quot;failedAttempts&quot;: 3,
              &quot;location&quot;: {
                &quot;siteId&quot;: &quot;SanJose&quot;,
                &quot;apsImpacted&quot;: []
              },
              &quot;timestamp&quot;: 1542693469197
            }
          ]
        }
      ]
    },
    &quot;connectedDevice&quot;: [
      {
        &quot;deviceDetails&quot;: {
          &quot;inventoryStatusDetail&quot;: &quot;&lt;status&gt;&lt;general code=\&quot;SNMP_TIMEOUT\&quot;/&gt;&lt;/status&gt;&quot;,
          &quot;lastUpdateTime&quot;: 1542693255158,
          &quot;errorDescription&quot;: &quot;SNMP timeouts are occurring with this device. Either the SNMP credentials are not correctly provided to controller or the device is responding slow and snmp timeout is low. If its a timeout issue, controller will attempt to progressively adjust the timeout in subsequent collection cycles to get device to managed state. User can also run discovery again only for this device using the discovery feature after adjusting the timeout and snmp credentials as required. Or user can update the timeout and snmp credentials as required using update credentials.&quot;,
          &quot;tagCount&quot;: &quot;0&quot;,
          &quot;lastUpdated&quot;: &quot;2018-11-20 05:54:15&quot;,
          &quot;id&quot;: &quot;a7633ae5-d3c9-4aea-837d-c3ad5b19c802&quot;,
          &quot;neighborTopology&quot;: [
            {
              &quot;errorCode&quot;: 5000,
              &quot;message&quot;: &quot;An internal has error occurred while processing this request.&quot;,
            }
          ],
          &quot;cisco360view&quot;: &quot;https://10.10.20.22/dna/assurance/home#networkDevice/a7633ae5-d3c9-4aea-837d-c3ad5b19c802&quot;
        }
      }
    ]
  }
}

</code></pre>
<ul>
<li>Convert from json to yaml</li>
</ul>
<pre><code class="language-py">JSON
{
  Servers: [
     {
        name: Server1
        owner: John
        created: 2021
        status: Active
     },
    {
        name: Server2
        owner: Huy 
        created: 2024
        status: Active
     }
  ]
}

YAML
Servers:
  - name: Server1
    owner: John
    created: 2021
    status: Active
  - name: Server2
    owner: Huy
    created: 2024
    status: Active

</code></pre>
<ul>
<li>YAML th∆∞·ªùng ƒë∆∞·ª£c s·ª≠ d·ª•ng l√†m ng√¥n ng·ªØ ƒë·ªãnh nghƒ©a c·∫•u h√¨nh</li>
<li>Data Structure:
<img src="./image/ss1_yaml_1.png" alt="alt text" /></li>
<li>YAML Ain't Markup Language (YAML) l√† t·∫≠p cha c·ªßa JSON, ƒë∆∞·ª£c thi·∫øt k·∫ø ƒë·ªÉ d·ªÖ ƒë·ªçc h∆°n.</li>
<li>V√¨ l√† t·∫≠p cha c·ªßa JSON n√™n c√°c b·ªô ph√¢n t√≠ch YAML c√≥ th·ªÉ ph√¢n t√≠ch c√°c t·ªáp JSON (nh∆∞ng ng∆∞·ª£c l·∫°i th√¨ kh√¥ng).</li>
<li>Do v·∫≠y, YAML t·ªët h∆°n JSON ·ªü m·ªôt s·ªë t√°c v·ª•, bao g·ªìm vi·ªác nh√∫ng tr·ª±c ti·∫øp m√£ JSON (c√≥ ch·ª©a d·∫•u ngo·∫∑c k√©p) trong c√°c file YAML.</li>
<li>YAML s·ª≠ d·ª•ng th·ª•t l·ªÅ ƒë·ªÉ x√°c ƒë·ªãnh ph√¢n c·∫•p trong t·ªáp.</li>
<li>Maps v√† danh s√°ch (list) c≈©ng c√≥ th·ªÉ ƒë∆∞·ª£c bi·ªÉu di·ªÖn kh√° t∆∞∆°ng t·ª± nh∆∞ trong JavaScript ho·∫∑c Python, d∆∞·ªõi d·∫°ng g·ªçi l√† ‚Äúflow syntax‚Äù ‚Äì c√∫ ph√°p lu·ªìng.</li>
</ul>
<pre><code class="language-js">person:
  name: John
  age: 30
  city: New York


person: {name: John, age: 30, city: New York}

</code></pre>
<pre><code class="language-js">fruits:
  - apple
  - orange
  - banana


fruits: [apple, orange, banana]

</code></pre>
<pre><code class="language-js">people:
  - name: John
    age: 30
    city: New York
  - name: Jane
    age: 25
    city: London


people:
  - {name: John, age: 30, city: New York}
  - {name: Jane, age: 25, city: London}

</code></pre>
<h2 id="pod"><a class="header" href="#pod">POD</a></h2>
<ul>
<li>L√† m·ªôt ƒë·ªëi t∆∞·ª£ng nh·ªè nh·∫•t ƒë∆∞·ª£c t·∫°o ra b·ªüi k8s</li>
<li>D√πng ƒë·ªÉ ƒë√≥ng g√≥i c√°c Containers v√†o b√™n trong</li>
<li>L√† m·ªôt instance c·ªßa application</li>
<li>Khi Pod ƒëang running n√≥ l√† th·ª±c th·ªÉ kh√¥ng th·ªÉ thay ƒë·ªïi (th√™m, x√≥a, s·ª≠a)</li>
<li>Scale workload =&gt; tƒÉng Pod =&gt; tƒÉng Host
<img src="./image/ss1_pod_scale.png" alt="alt text" /></li>
<li>Multiple Container in Pod
<img src="./image/ss1_multi_con_pod.png" alt="alt text" />
<ul>
<li><strong>Sidecar Container</strong>: container running song song v·ªõi container application</li>
<li><strong>Init Container</strong>: container running tr∆∞·ªõc container application</li>
</ul>
</li>
<li>Ch·ªâ n√™n ch·∫°y 1 container trong 1 pod</li>
</ul>
<h2 id="install"><a class="header" href="#install">Install</a></h2>
<h3 id="install-kubectl-on-ubuntu"><a class="header" href="#install-kubectl-on-ubuntu">Install kubectl on ubuntu</a></h3>
<pre><code class="language-py">curl -LO &quot;https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl&quot;

sudo install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl

kubectl version --client

</code></pre>
<h2 id="install-minikube"><a class="header" href="#install-minikube">Install MiniKube</a></h2>
<pre><code class="language-sh">sudo apt update -y
sudo apt upgrade -y

sudo reboot
sudo apt install -y curl wget apt-transport-https

curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64

sudo install minikube-linux-amd64 /usr/local/bin/minikube

minikube version

</code></pre>
<h2 id="deploy"><a class="header" href="#deploy">Deploy</a></h2>
<ul>
<li>C·∫ßn start minikube:</li>
</ul>
<pre><code class="language-sh">minikube start --driver=docker

minikube status
</code></pre>
<ul>
<li>Khi ta create 1 object, kubectl s·∫Ω t·ª± ƒë·ªông g·ª≠i c√¢u l·ªánh n√†y cho virtual host, virtual host n√≥ ƒëi t√¨m image n√†y n√≥ s·∫Ω t√¨m tr√™n dockerhub, do ƒë√≥ ta c·∫ßn push image l√™n dockerhub</li>
</ul>
<blockquote>
<p>kubectl create deployment first-app --image=kube-test</p>
</blockquote>
<p>Ki·ªÉm tra cho th·∫•y create object kh√¥ng th√†nh c√¥ng:</p>
<pre><code class="language-sh">‚ûú kub-action-01-starting-setup ‚ö°                                      Óúò 20.8.0  07:29:45
‚ñ∂ kubectl get deployment
NAME        READY   UP-TO-DATE   AVAILABLE   AGE
first-app   0/1     1            0           53s

‚ûú kub-action-01-starting-setup ‚ö°                                      Óúò 20.8.0  07:29:55
‚ñ∂ kubectl get pod
NAME                        READY   STATUS             RESTARTS   AGE
first-app-f975696fc-fhzqh   0/1     ImagePullBackOff   0          60s

# Do l√† ch∆∞a Ready n√™n c·∫ßn push image l√™n 
‚ûú kub-action-01-starting-setup ‚ö°                                      Óúò 20.8.0  07:30:02
‚ñ∂ kubectl delete deployment first-app
deployment.apps &quot;first-app&quot; deleted

</code></pre>
<blockquote>
<p>minikube dashboard # for monitor</p>
</blockquote>
<p><img src="./image/dashboard_minikube.png" alt="alt text" /></p>
<h3 id="how-kubectl-work"><a class="header" href="#how-kubectl-work">How kubectl work?</a></h3>
<p><img src="./image/kubectl_work.png" alt="alt text" /></p>
<h2 id="the-service-object"><a class="header" href="#the-service-object">The &quot;Service&quot; Object</a></h2>
<p><img src="./image/service_object.png" alt="alt text" /></p>
<ul>
<li>
<p>&quot;Service&quot; Object c√≥ th·ªÉ gi√∫p c√°c pod communicate v·ªõi nhau th√¥ng qua name, gi√∫p c√°c service group pods c√≥ th·ªÉ c√≥ 1 ƒë·∫°i ch·ªâ IP kh√¥ng ƒë·ªïi d√π c√°c pods b√™n trong c√≥ thay ƒë·ªïi</p>
</li>
<li>
<p>T·∫°o service m·ªõi, nh·∫±m t·∫°o c√°ch c√≥ th·ªÉ truy c·∫≠p ƒë·∫øn m·ªôt deployment c·ª• th·ªÉ:</p>
</li>
</ul>
<blockquote>
<p>kubectl expose deployment kube-app --type=LoadBalancer --port=8080</p>
</blockquote>
<ul>
<li><strong>X</strong>: ClusterIP, LoadBalancer, NodePort, ...</li>
<li><strong>LoadBalancer</strong> y√™u c·∫ßu ƒë∆∞·ª£c t·∫°o tr∆∞·ªõc ƒë√≥</li>
<li><strong>--port=8080</strong>: M·ªü c·ªïng 8080 tr√™n d·ªãch v·ª•. C√°c y√™u c·∫ßu ƒë∆∞·ª£c chuy·ªÉn ƒë·∫øn c·ªïng n√†y s·∫Ω ƒë∆∞·ª£c chuy·ªÉn ti·∫øp ƒë·∫øn c√°c Pod thu·ªôc Deployment &quot;first-app&quot; tr√™n c·ªïng m√† Deployment ƒëang l·∫Øng nghe (trong tr∆∞·ªùng h·ª£p n√†y, c·ªïng 8080).</li>
<li><strong>ClusterIP</strong>: D·ªãch v·ª• m·∫∑c ƒë·ªãnh khi kh√¥ng ch·ªâ ƒë·ªãnh --type n√†o. N√≥ t·∫°o ra m·ªôt ƒë·ªãa ch·ªâ IP n·ªôi b·ªô trong c·ª•m Kubernetes v√† ch·ªâ c√≥ th·ªÉ truy c·∫≠p t·ª´ b√™n trong c·ª•m. ƒê√¢y l√† lo·∫°i d·ªãch v·ª• nhanh v√† ph·ªï bi·∫øn nh·∫•t.</li>
<li><strong>ExternalName</strong>: Li√™n k·∫øt d·ªãch v·ª• v·ªõi m·ªôt t√™n DNS b√™n ngo√†i. Kh√¥ng t·∫°o ra ƒë·ªãa ch·ªâ IP n·ªôi b·ªô v√† kh√¥ng c√≥ load balancing. Th∆∞·ªùng ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ k·∫øt n·ªëi v·ªõi c√°c d·ªãch v·ª• b√™n ngo√†i c·ª•m Kubernetes</li>
<li><strong>LoadBalancer</strong>: T·∫°o ra m·ªôt LoadBalancer v√† g√°n m·ªôt ƒë·ªãa ch·ªâ IP c√¥ng c·ªông cho d·ªãch v·ª•. C√°c y√™u c·∫ßu ƒë∆∞·ª£c chuy·ªÉn ti·∫øp t·ª´ LoadBalancer ƒë·∫øn c√°c Pod thu·ªôc d·ªãch v·ª•.</li>
<li><strong>NodePort</strong>:
<ul>
<li>Khi b·∫°n t·∫°o m·ªôt d·ªãch v·ª• NodePort v√† k·∫øt n·ªëi n√≥ v·ªõi m·ªôt Deployment, t·∫•t c·∫£ c√°c Pod thu·ªôc Deployment ƒë√≥ s·∫Ω chia s·∫ª c√πng m·ªôt c·ªïng NodePort tr√™n m·ªói node. M·ªói Pod kh√¥ng c√≥ c·ªïng ri√™ng l·∫ª ƒë∆∞·ª£c m·ªü, v√† kh√¥ng c√≥ c√°ch ƒë·ªÉ y√™u c·∫ßu t·ª´ m·ªôt Pod c·ª• th·ªÉ ƒë∆∞·ª£c chuy·ªÉn ti·∫øp ƒë·∫øn m·ªôt Pod kh√°c trong c√πng m·ªôt Deployment th√¥ng qua c·ªïng NodePort.</li>
<li>V√≠ d·ª•, n·∫øu b·∫°n c√≥ m·ªôt Deployment v·ªõi nhi·ªÅu Pod, v√† t·∫°o m·ªôt d·ªãch v·ª• NodePort cho Deployment ƒë√≥, c·ªïng NodePort s·∫Ω chuy·ªÉn ti·∫øp y√™u c·∫ßu ƒë·∫øn b·∫•t k·ª≥ Pod n√†o thu·ªôc Deployment ƒë√≥. N√≥ kh√¥ng s·∫Ω chuy·ªÉn ti·∫øp y√™u c·∫ßu t·ª´ m·ªôt Pod c·ª• th·ªÉ ƒë·∫øn Pod kh√°c c·ª• th·ªÉ trong Deployment.</li>
</ul>
</li>
</ul>
<pre><code class="language-sh">‚ûú kub-action-01-starting-setup ‚ö°                                      Óúò 20.8.0  14:33:21
‚ñ∂ kubectl expose deployment kube-app --type=LoadBalancer --port=8080
service/kube-app exposed

‚ûú kub-action-01-starting-setup ‚ö°                                      Óúò 20.8.0  14:33:30
‚ñ∂ kubectl get service
NAME         TYPE           CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE
kube-app     LoadBalancer   10.102.88.140   &lt;pending&gt;     8080:31310/TCP   34s
kubernetes   ClusterIP      10.96.0.1       &lt;none&gt;        443/TCP          3h4m

</code></pre>
<ul>
<li>ClusterIP is default</li>
<li>Trong minikube th√¨ ƒë√¢y l√† 1 virtual host do ƒë√≥ th√¨ external-ip s·∫Ω lu√¥n pending nh∆∞ v·∫≠y.</li>
</ul>
<pre><code class="language-sh">‚ûú kub-action-01-starting-setup ‚ö°                                      Óúò 20.8.0  14:34:05
‚ñ∂ minikube service kube-app
|-----------|----------|-------------|---------------------------|
| NAMESPACE |   NAME   | TARGET PORT |            URL            |
|-----------|----------|-------------|---------------------------|
| default   | kube-app |        8080 | http://192.168.67.2:31310 |
|-----------|----------|-------------|---------------------------|
üèÉ  Starting tunnel for service kube-app.
|-----------|----------|-------------|------------------------|
| NAMESPACE |   NAME   | TARGET PORT |          URL           |
|-----------|----------|-------------|------------------------|
| default   | kube-app |             | http://127.0.0.1:43719 |
|-----------|----------|-------------|------------------------|
üéâ  Opening service default/kube-app in default browser...

# or
‚ûú Application ‚ö°                                                                                                    15:34:59
‚ñ∂ minikube service kube-app --url
http://127.0.0.1:43815
‚ùó  Because you are using a Docker driver on linux, the terminal needs to be open to run it.

</code></pre>
<ul>
<li>C√≥ kh·∫£ nƒÉng t·ª± restart n·∫øu pod b·ªã fail, ƒë·ªÉ duy tr√¨ t√≠nh ·ªïn ƒë·ªãnh c·ªßa ·ª©ng d·ª•ng.</li>
</ul>
<h2 id="scale"><a class="header" href="#scale">Scale</a></h2>
<pre><code class="language-sh">‚ûú ~ ‚ö°                                                                           19:40:47
‚ñ∂ kubectl scale deployment/kube-app --replicas=3
deployment.apps/kube-app scaled

‚ûú ~ ‚ö°                                                                           19:40:53
‚ñ∂ kubectl get pods
NAME                        READY   STATUS              RESTARTS      AGE
kube-app-57cdbc557f-8t6bc   0/1     ContainerCreating   0             2s
kube-app-57cdbc557f-g97wk   1/1     Running             3 (52m ago)   8h
kube-app-57cdbc557f-hnhw6   0/1     ContainerCreating   0             2s

‚ûú ~ ‚ö°                                                                           19:40:55
‚ñ∂ kubectl get pods
NAME                        READY   STATUS    RESTARTS      AGE
kube-app-57cdbc557f-8t6bc   1/1     Running   0             19s
kube-app-57cdbc557f-g97wk   1/1     Running   3 (53m ago)   8h
kube-app-57cdbc557f-hnhw6   1/1     Running   0             19s

</code></pre>
<p><img src="./image/scale_pods.png" alt="alt text" /></p>
<ul>
<li>Do l√† tr∆∞·ªõc ƒë√≥ ta add service type LoadBalancer =&gt; c√°c pods n√†y c≈©ng c√≥ load</li>
</ul>
<p><img src="./image/loadbalance_scale.png" alt="alt text" /></p>
<h2 id="update-new-version"><a class="header" href="#update-new-version">Update new version</a></h2>
<p><em><strong>Note: kh√¥ng th·ªÉ update image v·ªõi 1 t√™n kh√°c hay l√† 1 c√°i tech kh√°c</strong></em></p>
<ul>
<li>L·ªánh n√†y ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ c·∫≠p nh·∫≠t image c·ªßa container trong m·ªôt Deployment trong Kubernetes. Trong tr∆∞·ªùng h·ª£p n√†y, kube-app=/hjn4... kube-app ·ªü ƒë√¢y l√† t√™n container</li>
</ul>
<p><em>Note: C·∫ßn l∆∞u √Ω m·ªôt v·∫•n ƒë·ªÅ l√† tag version ph·∫£i kh√°c version tr∆∞·ªõc, b·ªüi v√¨ n·∫øu gi·ªëng nhau n√≥ s·∫Ω k download v·ªÅ</em></p>
<blockquote>
<p>kubectl set image deployment/kube-app kube-app=hjn4/kube-app:v2</p>
</blockquote>
<pre><code class="language-sh">‚ûú ~ ‚ö°                                                                           20:13:20
‚ñ∂ kubectl set image deployment/kube-app kube-app=hjn4/kube-app:v2
deployment.apps/kube-app image updated

</code></pre>
<ul>
<li>L·ªánh n√†y ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ theo d√µi tr·∫°ng th√°i c·ªßa qu√° tr√¨nh tri·ªÉn khai (rollout) sau khi b·∫°n ƒë√£ th·ª±c hi·ªán vi·ªác c·∫≠p nh·∫≠t image ho·∫∑c thay ƒë·ªïi kh√°c trong m·ªôt Deployment.</li>
</ul>
<blockquote>
<p>kubectl rollout status deployment/kube-app</p>
</blockquote>
<pre><code class="language-sh">‚ûú ~ ‚ö°                                                                           20:13:56
‚ñ∂ kubectl rollout status deployment/kube-app
Waiting for deployment &quot;kube-app&quot; rollout to finish: 1 out of 3 new replicas have been updated...
Waiting for deployment &quot;kube-app&quot; rollout to finish: 1 out of 3 new replicas have been updated...
Waiting for deployment &quot;kube-app&quot; rollout to finish: 1 out of 3 new replicas have been updated...
Waiting for deployment &quot;kube-app&quot; rollout to finish: 2 out of 3 new replicas have been updated...
Waiting for deployment &quot;kube-app&quot; rollout to finish: 2 out of 3 new replicas have been updated...
Waiting for deployment &quot;kube-app&quot; rollout to finish: 2 out of 3 new replicas have been updated...
Waiting for deployment &quot;kube-app&quot; rollout to finish: 1 old replicas are pending termination...
Waiting for deployment &quot;kube-app&quot; rollout to finish: 1 old replicas are pending termination...
deployment &quot;kube-app&quot; successfully rolled out

</code></pre>
<h2 id="rollback--history"><a class="header" href="#rollback--history">Rollback &amp; history</a></h2>
<ul>
<li>Ch√∫ng ta gi·∫£ l·∫≠p version l·ªói, update image v·ªõi tag kh√¥ng t·ªìn t·∫°i:</li>
</ul>
<pre><code class="language-sh">‚ûú ~ ‚ö°                                                                           20:14:10
‚ñ∂ kubectl set image deployment/kube-app kube-app=hjn4/kube-app:3
deployment.apps/kube-app image updated
‚ûú ~ ‚ö°                                                                           20:37:52
‚ñ∂ kubectl rollout status deployment/kube-app
Waiting for deployment &quot;kube-app&quot; rollout to finish: 1 out of 3 new replicas have been updated...
Waiting for deployment &quot;kube-app&quot; rollout to finish: 1 out of 3 new replicas have been updated...
Waiting for deployment &quot;kube-app&quot; rollout to finish: 1 out of 3 new replicas have been updated...
Waiting for deployment &quot;kube-app&quot; rollout to finish: 1 out of 3 new replicas have been updated...
Waiting for deployment &quot;kube-app&quot; rollout to finish: 1 out of 3 new replicas have been updated...
Waiting for deployment &quot;kube-app&quot; rollout to finish: 1 out of 3 new replicas have been updated...
Waiting for deployment &quot;kube-app&quot; rollout to finish: 1 out of 3 new replicas have been updated...

</code></pre>
<p><img src="./image/rollback_failed_version.png" alt="alt text" /></p>
<ul>
<li>Ho√†n t√°c vi·ªác tri·ªÉn khai version m·ªõi nh·∫•t:</li>
</ul>
<blockquote>
<p>kubectl rollout undo deployment/kube-app</p>
</blockquote>
<ul>
<li>
<p>Check c√°c version update v√† rollback v·ªÅ tr·∫°ng th√°i ch·ªâ ƒë·ªãnh trong qu√° kh·ª©:</p>
</li>
<li>
<p>xem c√°c tr·∫°ng th√°i tr∆∞·ªõc ƒë√≥</p>
</li>
</ul>
<blockquote>
<p>kubectl rollout history deployment/kube-app</p>
</blockquote>
<ul>
<li>xem chi ti·∫øt 1 c·ª• th·ªÉ 1 tr·∫°ng th√°i</li>
</ul>
<blockquote>
<p>kubectl rollout history deployment/kube-app --revision=1</p>
</blockquote>
<pre><code class="language-sh">‚ûú ~ ‚ö°                                                                           20:42:27
‚ñ∂ kubectl rollout history deployment/kube-app
deployment.apps/kube-app
REVISION  CHANGE-CAUSE
1         &lt;none&gt;
3         &lt;none&gt;
4         &lt;none&gt;

‚ûú ~ ‚ö°                                                                           20:43:26
‚ñ∂ kubectl rollout history deployment/kube-app --revision=1
deployment.apps/kube-app with revision #1
Pod Template:
  Labels:       app=kube-app
        pod-template-hash=57cdbc557f
  Containers:
   kube-app:
    Image:      hjn4/kube-app
    Port:       &lt;none&gt;
    Host Port:  &lt;none&gt;
    Environment:        &lt;none&gt;
    Mounts:     &lt;none&gt;
  Volumes:      &lt;none&gt;

</code></pre>
<ul>
<li>Rollback v·ªÅ qu√° kh·ª©:</li>
</ul>
<blockquote>
<p>kubectl rollout undo deployment/kube-app --to-revision=1</p>
</blockquote>
<pre><code class="language-sh">‚ûú ~ ‚ö°                                                                           20:44:22
‚ñ∂ kubectl rollout undo deployment/kube-app --to-revision=1
deployment.apps/kube-app rolled back

</code></pre>
<h3 id="t·∫°i-sao-kh√¥ng-th·∫•y-downtime-trong-qu√°-tr√¨nh-rollback"><a class="header" href="#t·∫°i-sao-kh√¥ng-th·∫•y-downtime-trong-qu√°-tr√¨nh-rollback">T·∫°i sao kh√¥ng th·∫•y downtime trong qu√° tr√¨nh rollback</a></h3>
<ul>
<li><strong>Rolling Update Strategy</strong>: Kubernetes s·ª≠ d·ª•ng chi·∫øn l∆∞·ª£c c·∫≠p nh·∫≠t cu·ªôn (Rolling Update) m·∫∑c ƒë·ªãnh khi b·∫°n th·ª±c hi·ªán c√°c thay ƒë·ªïi trong m·ªôt Deployment. ƒêi·ªÅu n√†y c√≥ nghƒ©a l√† n√≥ s·∫Ω t·∫°o ra c√°c b·∫£n sao m·ªõi c·ªßa Pods, lo·∫°i b·ªè t·ª´ng Pod c≈© m·ªôt c√°ch d·∫ßn d·∫ßn ƒë·ªÉ ƒë·∫£m b·∫£o r·∫±ng √≠t nh·∫•t m·ªôt s·ªë l∆∞·ª£ng Pods lu√¥n ho·∫°t ƒë·ªông trong su·ªët qu√° tr√¨nh tri·ªÉn khai.</li>
<li><strong>Pods C≈© V√† M·ªõi Ho·∫°t ƒê·ªông ƒê·ªìng Th·ªùi</strong>: Trong qu√° tr√¨nh cu·ªôn ch·∫£y, c√≥ m·ªôt kho·∫£ng th·ªùi gian khi c·∫£ c√°c Pods c≈© v√† m·ªõi ƒë·ªÅu ho·∫°t ƒë·ªông ƒë·ªìng th·ªùi. Kubernetes ƒë·∫£m b·∫£o r·∫±ng s·ªë l∆∞·ª£ng Pods ho·∫°t ƒë·ªông kh√¥ng bao gi·ªù gi·∫£m xu·ªëng d∆∞·ªõi m·ªôt m·ª©c nh·∫•t ƒë·ªãnh, nh·ªù ƒë√≥ gi·∫£m thi·ªÉu ho·∫∑c lo·∫°i b·ªè downtime.</li>
<li><strong>Health Checks</strong>: Kubernetes s·ª≠ d·ª•ng c√°c ki·ªÉm tra s·ª©c kh·ªèe (health checks) ƒë·ªÉ ƒë·∫£m b·∫£o r·∫±ng m·ªói Pod m·ªõi ƒë∆∞·ª£c tri·ªÉn khai ƒë∆∞·ª£c xem l√† &quot;s·∫µn s√†ng&quot; tr∆∞·ªõc khi lo·∫°i b·ªè m·ªôt Pod c≈©. ƒêi·ªÅu n√†y gi√∫p ƒë·∫£m b·∫£o r·∫±ng ch·ªâ c√≥ c√°c Pods s·∫µn s√†ng v√† l√†nh m·∫°nh ƒë∆∞·ª£c gi·ªØ l·∫°i.</li>
<li><strong>Pod Disruption Budgets</strong>: N·∫øu b·∫°n ƒë√£ c·∫•u h√¨nh Pod Disruption Budget trong Deployment, Kubernetes s·∫Ω gi·ªØ l·∫°i m·ªôt s·ªë l∆∞·ª£ng Pods ho·∫°t ƒë·ªông t·ªëi thi·ªÉu trong qu√° tr√¨nh tri·ªÉn khai ho·∫∑c quay l·∫°i phi√™n b·∫£n tr∆∞·ªõc ƒë√≥.</li>
</ul>
<h3 id="delete"><a class="header" href="#delete">Delete</a></h3>
<pre><code class="language-sh">‚ûú ~ ‚ö°                                                                           20:45:57
‚ñ∂ kubectl delete service kube-app
service &quot;kube-app&quot; deleted
‚ûú ~ ‚ö°                                                                           20:52:49
‚ñ∂ kubectl delete deployment kube-app
deployment.apps &quot;kube-app&quot; deleted

‚ûú ~ ‚ö°                                                                           20:53:00
‚ñ∂ kubectl get deployment
No resources found in default namespace.

‚ûú ~ ‚ö°                                                                           20:53:07
‚ñ∂ kubectl get pod
NAME                        READY   STATUS        RESTARTS   AGE
kube-app-57cdbc557f-99ftg   1/1     Terminating   0          7m16s
kube-app-57cdbc557f-k8fx9   1/1     Terminating   0          7m10s
kube-app-57cdbc557f-z8nl9   1/1     Terminating   0          7m13s
‚ûú ~ ‚ö°                                                                           20:53:13
‚ñ∂ kubectl get pod
No resources found in default namespace.
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../blogs/AWS/Sec.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../../blogs/Linux/bandit.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../blogs/AWS/Sec.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../blogs/Linux/bandit.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
