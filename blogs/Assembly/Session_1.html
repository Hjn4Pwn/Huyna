<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js dark">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Session 1 - Hjn4 Blog</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../theme/css/additional.css">

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "dark";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('dark')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="../../homepage.html">HOME - Huy Na</a></li><li class="chapter-item affix "><li class="part-title">ROP Emporium</li><li class="chapter-item "><a href="../../blogs/PWN/ROP_Emporium/ret2win_challenge.html">ret2win - challenge 1</a></li><li class="chapter-item "><a href="../../blogs/PWN/ROP_Emporium/split_challenge.html">split - challenge 2</a></li><li class="chapter-item "><a href="../../blogs/PWN/ROP_Emporium/callme_challenge.html">callme - challenge 3</a></li><li class="chapter-item "><a href="../../blogs/PWN/ROP_Emporium/write4_challenge.html">write4 - challenge 4</a></li><li class="chapter-item "><a href="../../blogs/PWN/ROP_Emporium/badchars_challenge.html">badchars - challenge 5</a></li><li class="chapter-item affix "><li class="part-title">Pwnable.tw</li><li class="chapter-item "><a href="../../blogs/PWN/Pwnable_tw/start_challenge.html">start</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwnable_tw/orw_challenge.html">orw</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwnable_tw/calc_challenge.html">calc</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwnable_tw/3x17_challenge.html">3x17</a></li><li class="chapter-item affix "><li class="part-title">Pwn_Pico</li><li class="chapter-item "><a href="../../blogs/PWN/Pwn_Pico/herelibc_challenge.html">Here's a libc </a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwn_Pico/hijacking_challenge.html">hijacking </a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwn_Pico/fermat_strins_challenge.html">fermat_strings </a></li><li class="chapter-item affix "><li class="part-title">Pwn from blabla</li><li class="chapter-item "><a href="../../blogs/PWN/Pwn_from_blabla/handy_shellcode_challenge.html">handy shellcode</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwn_from_blabla/pwn07_challenge.html">pwn07 - ret2libc vs ROP</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwn_from_blabla/got_formatstring_challenge.html">GOT overwrite with format string</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwn_from_blabla/training_brutepie_challenge.html">training - brute pie</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwn_from_blabla/training_leak_with_read_challenge.html">training - leak with read</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwn_from_blabla/training_leak_Pie_Canary_challenge.html">training - leak Pie-Canary</a></li><li class="chapter-item affix "><li class="part-title">Assembly</li><li class="chapter-item expanded "><a href="../../blogs/Assembly/Session_1.html" class="active">Session 1</a></li><li class="chapter-item "><a href="../../blogs/Assembly/Session_2.html">Session 2</a></li><li class="chapter-item affix "><li class="part-title">RE_Pico</li><li class="chapter-item "><a href="../../blogs/RE_Pico/ARMssembly_0.html">ARMssembly 0</a></li><li class="chapter-item "><a href="../../blogs/RE_Pico/ARMssembly_1.html">ARMssembly 1</a></li><li class="chapter-item "><a href="../../blogs/RE_Pico/ARMssembly_2.html">ARMssembly 2</a></li><li class="chapter-item affix "><li class="part-title">Docker</li><li class="chapter-item "><a href="../../blogs/Docker/tips.html">Some tips for ctf</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Hjn4 Blog</h1>

                    <div class="right-buttons">

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="session-1"><a class="header" href="#session-1">Session 1</a></h1>
<p>Sau khi trải qua 1 kì test Binary thì mình nhận ra khả năng pwn của mình còn khá kém (maybe do mình chỉ mới bắt đầu). Hơn thế nữa là khả năng <strong>RE</strong>, đọc Assembly của mình quá kém nên là, mình sẽ bắt đầu viết về những cái mình học được ở chuỗi seri asm này.</p>
<p>Oke now, let's go</p>
<ol>
<li>
<p>segment data:</p>
<ol>
<li>section .data</li>
<li>section .bss</li>
</ol>
</li>
<li>
<p>segment Code:</p>
<ol>
<li>section .text</li>
</ol>
</li>
<li>
<p>segment stack</p>
</li>
</ol>
<h3 id="section-data"><a class="header" href="#section-data">section .data</a></h3>
<p>Ở đây ta sẽ khai báo hằng và khai báo biến, các biến này được khởi tạo ngay khi khai báo <strong>(initialized variables)</strong></p>
<blockquote>
<h4 id="khai-báo--tên-biến--kiểu-dữ-liệu--giá-trị-khởi-tạo"><a class="header" href="#khai-báo--tên-biến--kiểu-dữ-liệu--giá-trị-khởi-tạo">Khai báo : Tên biến + kiểu dữ liệu + <em><strong>giá trị khởi tạo</strong></em></a></h4>
</blockquote>
<div class="table-wrapper"><table><thead><tr><th>type</th><th>num_bit variable</th></tr></thead><tbody>
<tr><td>db</td><td>8-bit variable</td></tr>
<tr><td>dw</td><td>16-bit variable</td></tr>
<tr><td>dd</td><td>32-bit variable</td></tr>
<tr><td>dq</td><td>64-bit variable</td></tr>
<tr><td>ddq</td><td>128-bit variable (int)</td></tr>
<tr><td>dt</td><td>128-bit variable (float)</td></tr>
</tbody></table>
</div>
<p><strong>EX:</strong> a db 9</p>
<ul>
<li>
<p>Times prefix</p>
<p>start times 9 db '*'  <em>Tức là khai báo start có 9 vùng nhớ có 9 dấu *</em></p>
</li>
</ul>
<h3 id="section-bss"><a class="header" href="#section-bss">section .bss</a></h3>
<p>Còn đây thì sẽ khai báo các biến chưa khởi tạo <strong>(uninitialized variables)</strong>. Tuy nhiên thì cứ nghiễm nhiên khởi tạo nó = 0 thì việc không có section .bss trong program là bình thường </p>
<blockquote>
<h4 id="tên-biến--kiểu-dữ-liệu--số-phần-tử"><a class="header" href="#tên-biến--kiểu-dữ-liệu--số-phần-tử">tên biến + kiểu dữ liệu + <em><strong>Số phần tử</strong></em></a></h4>
</blockquote>
<div class="table-wrapper"><table><thead><tr><th>type</th><th>num_bit variable</th></tr></thead><tbody>
<tr><td>resb</td><td>8-bit variable</td></tr>
<tr><td>resw</td><td>16-bit variable</td></tr>
<tr><td>resd</td><td>32-bit variable</td></tr>
<tr><td>resq</td><td>64-bit variable</td></tr>
<tr><td>resdq</td><td>128-bit variable</td></tr>
</tbody></table>
</div>
<p><strong>EX:</strong> bArr resb 10</p>
<h3 id="section-text"><a class="header" href="#section-text">section .text</a></h3>
<p>Đây là section chứa code, tuy nhiên cần khai báo vị trí bắt đầu của chương trình, kiểu như trong C thì có hàm main, thì ở đây ta cần khai báo:</p>
<pre><code class="language-shell">section .text
    global _start   ; &lt;-- program entry

_start:   ; &lt;-- label


_exit:   ; &lt;-- label

    mov eax, 1
    int 0x80    ; &lt;-- systemcall
                ; is comment
</code></pre>
<ul>
<li>
<p>Ở đây thì khi ta viết số bình thường : <strong>10,15,190</strong> được hiểu là <em><strong>dec</strong></em>. Nếu muốn biểu diễn dạng <em><strong>hex</strong></em> thì cần <strong>0x10, 0x190</strong></p>
</li>
<li>
<p>Khai báo hằng: </p>
<p>Format:  <em><strong>name</strong></em> equ <em><strong>value</strong></em> </p>
<p>Ex: SIZE equ 1000</p>
</li>
</ul>
<p>Về cơ bản thì khi khai báo hằng (thường viết in hoa), thì lúc compile thì những cái là tên hằng sẽ được thay bằng giá trị mà ta khai báo. Hằng thì không chiếm ô nhớ trong chương trình (?) </p>
<h3 id="example"><a class="header" href="#example">Example</a></h3>
<pre><code class="language-shell">section .data

SYS_EXIT equ 1

a db 17
b db 9
c db 0
d dw 4096

hello db &quot;HuyNa Hi&quot;, 10
len equ $ - hello

section .text
    global _start

_start:
    mov al, [a]
    add al, [b]
    mov [c], al

    mov eax, 4
    mov ebx, 1
    mov ecx, hello
    mov edx, len
    int 0x80

_exit:
    mov eax,SYS_EXIT
    int 0x80

</code></pre>
<p>Command for run:</p>
<ul>
<li><em><strong>nasm -f elf hello.asm</strong></em></li>
<li><em><strong>ld -m elf_i386 -s -o hello hello.o</strong></em></li>
<li><em><strong>./hello</strong></em></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../blogs/PWN/Pwn_from_blabla/training_leak_Pie_Canary_challenge.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../../blogs/Assembly/Session_2.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../blogs/PWN/Pwn_from_blabla/training_leak_Pie_Canary_challenge.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../blogs/Assembly/Session_2.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
