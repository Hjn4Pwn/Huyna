<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js dark">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Basic Docker - Hjn4 Blog</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../theme/css/additional.css">

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "dark";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('dark')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="../../homepage.html">HOME - Huy Na</a></li><li class="chapter-item affix "><li class="part-title">Documents from everywhere</li><li class="chapter-item "><a href="../../blogs/Documents/troubleshooting.html">Troubleshooting</a></li><li class="chapter-item "><a href="../../blogs/Documents/study.html">Study</a></li><li class="chapter-item affix "><li class="part-title">AWS</li><li class="chapter-item "><a href="../../blogs/AWS/job.html">Requirements for job</a></li><li class="chapter-item "><a href="../../blogs/AWS/EC2.html">Computing Services - EC2</a></li><li class="chapter-item "><a href="../../blogs/AWS/IAM.html">Identity and Access Management -IAM</a></li><li class="chapter-item "><a href="../../blogs/AWS/S3.html">Simple Storage Service - S3</a></li><li class="chapter-item "><a href="../../blogs/AWS/LoadBalancing-Autoscaling.html">Load balancing and Autoscaling</a></li><li class="chapter-item "><a href="../../blogs/AWS/RDS.html">Relational Database Service - RDS</a></li><li class="chapter-item "><a href="../../blogs/AWS/DynamoDB.html">Database Services - No SQL - DynamoDB</a></li><li class="chapter-item "><a href="../../blogs/AWS/Lambda.html">Serverless Lambda</a></li><li class="chapter-item "><a href="../../blogs/AWS/VPC.html">Networking service - VPC, Peering, Endpoint</a></li><li class="chapter-item "><a href="../../blogs/AWS/Gateway_Cognito.html">API Gateway & Cognito</a></li><li class="chapter-item "><a href="../../blogs/AWS/CloudFront.html">Content Delivery Service (CDN) - CloudFront</a></li><li class="chapter-item affix "><li class="part-title">Linux + Git</li><li class="chapter-item "><a href="../../blogs/Linux/bandit.html">Bandit challenge</a></li><li class="chapter-item "><a href="../../blogs/Linux/command_session_1.html">Command session 1</a></li><li class="chapter-item "><a href="../../blogs/Linux/git_command.html">Git command</a></li><li class="chapter-item "><a href="../../blogs/Linux/ssh.html">SSH</a></li><li class="chapter-item affix "><li class="part-title">Docker</li><li class="chapter-item "><a href="../../blogs/Docker/tips.html">Some docker tips for CTF</a></li><li class="chapter-item expanded "><a href="../../blogs/Docker/get_started.html" class="active">Basic Docker</a></li><li class="chapter-item "><a href="../../blogs/Docker/dockerfile_write.html">Dockerfile</a></li><li class="chapter-item "><a href="../../blogs/Docker/docker_network.html">Docker Network</a></li><li class="chapter-item affix "><li class="part-title">Jenkins</li><li class="chapter-item "><a href="../../blogs/Jenkins/install_by_docker.html">Install Jenkins By Docker</a></li><li class="chapter-item "><a href="../../blogs/Jenkins/link_git_jenkins.html">Link git with jenkins</a></li><li class="chapter-item "><a href="../../blogs/Jenkins/pipline_github_jenkins.html">Pipeline jenkinsfile with github</a></li><li class="chapter-item "><a href="../../blogs/Jenkins/gitlab_jenkins.html">Link gitlab with Jenkins</a></li><li class="chapter-item "><a href="../../blogs/Jenkins/gitlab_dockerhub.html">Gitlab-dockerhub-pipeline</a></li><li class="chapter-item affix "><li class="part-title">Python</li><li class="chapter-item "><a href="../../blogs/Python/RE.html">Regular Expression</a></li><li class="chapter-item "><a href="../../blogs/Python/Automation_1.html">Automation with Python 1</a></li><li class="chapter-item affix "><li class="part-title">Bash script</li><li class="chapter-item "><a href="../../blogs/Bash_script/Variables_Environment.html">Shell Variables and Environment</a></li><li class="chapter-item "><a href="../../blogs/Bash_script/Conditionals_Execution.html">Conditionals Execution</a></li><li class="chapter-item "><a href="../../blogs/Bash_script/Bash_Loops.html">Bash Loops & Function</a></li><li class="chapter-item "><a href="../../blogs/Bash_script/Shell_Redirection.html">Shell Redirection & Pipes and Filters</a></li><li class="chapter-item "><a href="../../blogs/Bash_script/Interactive_Scripts.html">Interactive Scripts</a></li><li class="chapter-item affix "><li class="part-title">System and Network Administration</li><li class="chapter-item "><a href="../../blogs/Network/basic_network_1.html">Basic Network 1</a></li><li class="chapter-item affix "><li class="part-title">PWN</li><li class="chapter-item "><a href="../../blogs/PWN/Emporium_ROP.html">Rop Emporium</a></li><li class="chapter-item "><a href="../../blogs/PWN/pwnableTW.html">Pwnable.tw</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pico_CTF.html">Pwn_PicoCTF</a></li><li class="chapter-item "><a href="../../blogs/PWN/PWN_from_blabla.html">Pwn from blabla</a></li><li class="chapter-item affix "><li class="part-title">ROP Emporium</li><li class="chapter-item "><a href="../../blogs/PWN/ROP_Emporium/ret2win_challenge.html">ret2win - chall 1</a></li><li class="chapter-item "><a href="../../blogs/PWN/ROP_Emporium/split_challenge.html">split - chall 2</a></li><li class="chapter-item "><a href="../../blogs/PWN/ROP_Emporium/callme_challenge.html">callme - chall 3</a></li><li class="chapter-item "><a href="../../blogs/PWN/ROP_Emporium/write4_challenge.html">write4 - chall 4</a></li><li class="chapter-item "><a href="../../blogs/PWN/ROP_Emporium/badchars_challenge.html">badchars - chall 5</a></li><li class="chapter-item "><a href="../../blogs/PWN/ROP_Emporium/pivot_challenge.html">pivot - chall 7</a></li><li class="chapter-item "><a href="../../blogs/PWN/ROP_Emporium/ret2csu_challenge.html">ret2csu - chall 8</a></li><li class="chapter-item affix "><li class="part-title">Pwnable.tw</li><li class="chapter-item "><a href="../../blogs/PWN/Pwnable_tw/start_challenge.html">start</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwnable_tw/orw_challenge.html">orw</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwnable_tw/calc_challenge.html">calc</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwnable_tw/3x17_challenge.html">3x17</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwnable_tw/dubblesort_challenge.html">dubblesort</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwnable_tw/silver_bullet_challenge.html">silver_bullet</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwnable_tw/applestore_challenge.html">applestore</a></li><li class="chapter-item affix "><li class="part-title">Pwn_Pico</li><li class="chapter-item "><a href="../../blogs/PWN/Pwn_Pico/herelibc_challenge.html">Here's a libc</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwn_Pico/hijacking_challenge.html">hijacking</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwn_Pico/fermat_strins_challenge.html">fermat_strings</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwn_Pico/Guessgame_challenge.html">Guessgame</a></li><li class="chapter-item affix "><li class="part-title">Pwn from blabla</li><li class="chapter-item "><a href="../../blogs/PWN/Pwn_from_blabla/handy_shellcode_challenge.html">handy shellcode</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwn_from_blabla/pwn07_challenge.html">pwn07 - ret2libc vs ROP</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwn_from_blabla/got_formatstring_challenge.html">GOT overwrite with format string</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwn_from_blabla/training.html">training</a></li><li class="chapter-item affix "><li class="part-title">Assembly</li><li class="chapter-item "><a href="../../blogs/Assembly/ASM.html">ASM</a></li><li class="chapter-item "><a href="../../blogs/Assembly/Session_1.html">Session 1</a></li><li class="chapter-item "><a href="../../blogs/Assembly/Session_2.html">Session 2</a></li><li class="chapter-item "><a href="../../blogs/Assembly/Session_3.html">Session 3</a></li><li class="chapter-item affix "><li class="part-title">RE_PicoCTF</li><li class="chapter-item "><a href="../../blogs/RE/RE.html">RE</a></li><li class="chapter-item "><a href="../../blogs/RE_Pico/ARMssembly_0.html">ARMssembly 0</a></li><li class="chapter-item "><a href="../../blogs/RE_Pico/ARMssembly_1.html">ARMssembly 1</a></li><li class="chapter-item "><a href="../../blogs/RE_Pico/ARMssembly_2.html">ARMssembly 2</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Hjn4 Blog</h1>

                    <div class="right-buttons">

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="get-started"><a class="header" href="#get-started">Get started</a></h1>
<ul>
<li><a href="#image">Image</a></li>
<li><a href="#build-docker-image">Build docker image</a></li>
<li><a href="#run-container">run container</a></li>
<li><a href="#update-the-application">update the application</a></li>
<li><a href="#share-docker-application">share image</a></li>
</ul>
<p><img src="./image/image_vs_container.png" alt="Docker image vs docker container" /></p>
<h2 id="image"><a class="header" href="#image">Image</a></h2>
<p>Image: là 1 thực thể giúp cho docker biết được phải chạy cái ứng dụng như thế nào, cần download những packages, những services, version nào để có thể chạy được cái ứng dụng của mình</p>
<h2 id="build-docker-image"><a class="header" href="#build-docker-image">Build docker image</a></h2>
<p>Như là mình đọc Doc của docker và làm theo thoi.</p>
<ul>
<li>Đầu tiên là cần clone cái source app về để thực hành</li>
<li>Sau khi clone về thì tiến hành cài đặt các package với <strong>npm i</strong></li>
<li>Run app với <strong>node src/index.js</strong></li>
<li>Từ giờ sẽ tiến hành build image:
<ul>
<li>Tạo 1 file Dockerfile với nội dung:</li>
</ul>
</li>
</ul>
<pre><code class="language-python"># syntax=docker/dockerfile:1

FROM node:18-alpine
WORKDIR /app
COPY . .
RUN yarn install --production
CMD [&quot;node&quot;, &quot;src/index.js&quot;]
EXPOSE 3000

</code></pre>
<ul>
<li>Sau đó sẽ tiến hành build với lệnh: <strong>docker build -t getting-started .</strong> hoặc chúng ta có thể gán thêm version cho image bằng cách <strong>docker build -t getting-started:v1 .</strong></li>
<li>Sau khi build image xong ta cos thể dùng lệnh <strong>docker image ls</strong> để list các image hiện có</li>
</ul>
<pre><code class="language-python">➜ getting-started-app ⚡( main)                                                                                                        20.8.0  2 weeks ago 
▶ docker image ls
REPOSITORY               TAG       IMAGE ID       CREATED         SIZE
getting-started          latest    797b932466d3   6 minutes ago   323MB
docker/getting-started   latest    3e4394f6b72f   10 months ago   47MB

</code></pre>
<p>Trong quá trình học mình có cài Docker destop, tuy nhiên mình để đó ngắm nghía cho nó trực quan hóa thoi, chứ vẫn chỉ nên dùng CLI thay vì thao tái với GUI</p>
<h2 id="run-container"><a class="header" href="#run-container">run container</a></h2>
<ul>
<li><strong>docker ps -a</strong></li>
<li><strong>docker run -dp 127.0.0.1:3000:3000 getting-started</strong> sẽ nhận được tag name là mặc định</li>
<li><strong>docker run -dp 127.0.0.1:3000:3000 --name hjn4-test getting-started</strong> có thể tùy chỉnh name</li>
<li><strong>docker stop/start &lt;name/id container&gt;</strong></li>
</ul>
<pre><code class="language-python">➜ getting-started-app ⚡( main)                                                                                                        20.8.0  2 weeks ago 
▶ docker image ls
REPOSITORY               TAG       IMAGE ID       CREATED          SIZE
getting-started          latest    797b932466d3   47 minutes ago   323MB
docker/getting-started   latest    3e4394f6b72f   10 months ago    47MB
➜ getting-started-app ⚡( main)                                                                                                        20.8.0  2 weeks ago 
▶ docker run -dp 127.0.0.1:3000:3000 getting-started
25c0441e08acf8dec3be5f83bec74d0900814e60d5b95961a940687f98d4d882
➜ getting-started-app ⚡( main)                                                                                                        20.8.0  2 weeks ago 
▶ docker ps
CONTAINER ID   IMAGE             COMMAND                  CREATED         STATUS         PORTS                      NAMES
25c0441e08ac   getting-started   &quot;docker-entrypoint.s…&quot;   5 seconds ago   Up 4 seconds   127.0.0.1:3000-&gt;3000/tcp   blissful_fermat
➜ getting-started-app ⚡( main)                                                                                                        20.8.0  2 weeks ago 
▶ docker stop blissful_fermat
blissful_fermat
➜ getting-started-app ⚡( main)                                                                                                        20.8.0  2 weeks ago 
▶ docker ps -a
CONTAINER ID   IMAGE             COMMAND                  CREATED         STATUS                     PORTS     NAMES
25c0441e08ac   getting-started   &quot;docker-entrypoint.s…&quot;   2 minutes ago   Exited (0) 5 seconds ago             blissful_fermat
➜ getting-started-app ⚡( main)                                                                                                        20.8.0  2 weeks ago 
▶ docker run -dp 127.0.0.1:3000:3000 --name hjn4-test getting-started
393b2bbac29d134b92593257138700871bc9568439eb919bbbe93a54d1509abc
➜ getting-started-app ⚡( main)                                                                                                        20.8.0  2 weeks ago 
▶ docker ps -a
CONTAINER ID   IMAGE             COMMAND                  CREATED         STATUS                      PORTS                      NAMES
393b2bbac29d   getting-started   &quot;docker-entrypoint.s…&quot;   6 seconds ago   Up 6 seconds                127.0.0.1:3000-&gt;3000/tcp   hjn4-test
25c0441e08ac   getting-started   &quot;docker-entrypoint.s…&quot;   2 minutes ago   Exited (0) 49 seconds ago                              blissful_fermat
➜ getting-started-app ⚡( main)                                                                                                        20.8.0  2 weeks ago 
▶ docker stop hjn4-test
hjn4-test
➜ getting-started-app ⚡( main)                                                                                                        20.8.0  2 weeks ago 
▶ docker start hjn4-test
hjn4-test
➜ getting-started-app ⚡( main)                                                                                                        20.8.0  2 weeks ago 
▶ docker stop hjn4-test
hjn4-test

</code></pre>
<ul>
<li><strong>docker rm &lt;name/id container&gt;</strong></li>
</ul>
<pre><code class="language-shell">➜ getting-started-app ⚡( main)                                                                                                        20.8.0  2 weeks ago 
▶ docker ps -a
CONTAINER ID   IMAGE             COMMAND                  CREATED         STATUS                     PORTS     NAMES
393b2bbac29d   getting-started   &quot;docker-entrypoint.s…&quot;   6 minutes ago   Exited (0) 5 minutes ago             hjn4-test
25c0441e08ac   getting-started   &quot;docker-entrypoint.s…&quot;   9 minutes ago   Exited (0) 7 minutes ago             blissful_fermat
➜ getting-started-app ⚡( main)                                                                                                        20.8.0  2 weeks ago 
▶ docker rm blissful_fermat
blissful_fermat
➜ getting-started-app ⚡( main)                                                                                                        20.8.0  2 weeks ago 
▶ docker ps -a
CONTAINER ID   IMAGE             COMMAND                  CREATED         STATUS                     PORTS     NAMES
393b2bbac29d   getting-started   &quot;docker-entrypoint.s…&quot;   6 minutes ago   Exited (0) 5 minutes ago             hjn4-test

</code></pre>
<h2 id="update-the-application"><a class="header" href="#update-the-application">update the application</a></h2>
<ul>
<li>Update bằng cách: xóa, stop, cái container hiện tại và phải build image mới, run container mới.</li>
<li>Mình vẫn chưa tìm hiểu có cách nào khác không, sẽ tìm hiểu sau khi clear hết các task này</li>
</ul>
<h2 id="share-docker-application"><a class="header" href="#share-docker-application">share docker application</a></h2>
<p>Nói đơn giản thì là push lên docker hub thoi</p>
<pre><code class="language-shell">➜ getting-started-app ⚡( main)                                                                                                       20.8.0  2 weeks ago 
▶ docker tag getting-started hjn4/learn-get-started-from-docker-doc

➜ getting-started-app ⚡( main)                                                                                                        20.8.0  2 weeks ago 
▶ docker image ls
REPOSITORY                               TAG       IMAGE ID       CREATED             SIZE
hjn4/learn-get-started-from-docker-doc   latest    797b932466d3   About an hour ago   323MB
getting-started                          latest    797b932466d3   About an hour ago   323MB
docker/getting-started                   latest    3e4394f6b72f   10 months ago       47MB

➜ getting-started-app ⚡( main)                                                                                                        20.8.0  2 weeks ago 
▶ docker push hjn4/learn-get-started-from-docker-doc
Using default tag: latest
The push refers to repository [docker.io/hjn4/learn-get-started-from-docker-doc]
75de2c3fea36: Pushed 
5f73fb1faa67: Pushed 
fb74669cf256: Pushed 
b76efd4eddd5: Mounted from library/node 
fa5569ec60d1: Mounted from library/node 
b105890ed2f2: Mounted from library/node 
cc2447e1835a: Mounted from library/node 
latest: digest: sha256:eba4e266c4935c7889ad252aab3eb871775fa353160568dc1c19666035cf9cce size: 1788

➜ getting-started-app ⚡( main)                                                                                                        20.8.0  2 weeks ago 
▶ 

</code></pre>
<ul>
<li>Đầu tiên cần gán tag cho image cần push:</li>
</ul>
<blockquote>
<p>docker tag <em>image-name</em> <em>username-dockerhub</em> <strong>/</strong> <em>repo-name-on-docker-hub</em> <strong>:</strong> <em>version</em></p>
</blockquote>
<ul>
<li>
<p>Chúng ta có thể dùng list các image ra và thấy 1 image mới được tạo ra như trên</p>
</li>
<li>
<p>Kế tiếp là push:</p>
</li>
</ul>
<blockquote>
<p>docker push <em>username-dockerhub</em> <strong>/</strong> <em>repo-name-on-docker-hub</em></p>
</blockquote>
<p><em>chúng ta có thể tạo thêm version cho image như sau</em></p>
<pre><code class="language-shell">➜ getting-started-app ⚡( main)                                                                                                        20.8.0  2 weeks ago 
▶ docker tag getting-started hjn4/learn-get-started-from-docker-doc:v1
➜ getting-started-app ⚡( main)                                                                                                        20.8.0  2 weeks ago 
▶ docker image ls
REPOSITORY                               TAG       IMAGE ID       CREATED         SIZE
getting-started                          latest    797b932466d3   2 hours ago     323MB
hjn4/getting-started                     latest    797b932466d3   2 hours ago     323MB
hjn4/learn-get-started-from-docker-doc   latest    797b932466d3   2 hours ago     323MB
hjn4/learn-get-started-from-docker-doc   v1        797b932466d3   2 hours ago     323MB
docker/getting-started                   latest    3e4394f6b72f   10 months ago   47MB

</code></pre>
<h3 id="clone-container-về-run-sau-khi-push-lên-docker-hub"><a class="header" href="#clone-container-về-run-sau-khi-push-lên-docker-hub">clone container về run sau khi push lên docker hub</a></h3>
<blockquote>
<p>docker run -dp 127.0.0.1:3000:3000 --name test-clone hjn4/learn-get-started-from-docker-doc:latest</p>
</blockquote>
<p>Note: <em>thường thì ta nên đặt version cụ thể như ngày tháng thay vì để mặc định là latest</em></p>
<h2 id="persist-the-db"><a class="header" href="#persist-the-db">Persist the DB</a></h2>
<p>Cái persist volume này sẽ ưu tiên sử dụng hơn bởi vì nó là do docker quản lý, có tính bảo mật hơn là mình tự quản lí</p>
<ul>
<li>
<p><strong>docker volume create todo-db</strong>
Tức là mình tạo ra 1 cái volume để mà lưu trữ data, sao cho các container sau này tạo lên nó sẽ link đến cái volume này nhầm đảm bảo dữ liệu trong lúc tương tác vẫn được lưu trữ.</p>
</li>
<li>
<p><strong>docker run -dp 127.0.0.1:3000:3000 --mount type=volume,src=todo-db,target=/etc/todos getting-started</strong></p>
</li>
</ul>
<p>Các cái như <strong>version</strong> hay <strong>--name</strong> đồ thì mình tự tinh chỉnh</p>
<pre><code class="language-shell">➜ getting-started-app ⚡( main)                                                                                                               20.8.0  2 weeks ago 
▶ docker volume inspect todo-db
[
    {
        &quot;CreatedAt&quot;: &quot;2023-10-27T13:50:42Z&quot;,
        &quot;Driver&quot;: &quot;local&quot;,
        &quot;Labels&quot;: null,
        &quot;Mountpoint&quot;: &quot;/var/lib/docker/volumes/todo-db/_data&quot;,
        &quot;Name&quot;: &quot;todo-db&quot;,
        &quot;Options&quot;: null,
        &quot;Scope&quot;: &quot;local&quot;
    }
]

</code></pre>
<h2 id="bind-mount"><a class="header" href="#bind-mount">Bind Mount</a></h2>
<p>Toẹt vời trên môi trường dev</p>
<blockquote>
<p>docker run -it --mount type=bind,src=&quot;$(pwd)&quot;,target=/src ubuntu bash</p>
</blockquote>
<p>Note: <em>The --mount option tells Docker to create a bind mount, where <strong>src</strong> is the current working directory on your host machine (getting-started-app), and target is where that directory should appear inside the container (/src).</em></p>
<p>Điều này giúp mình có thể tương tác tức thì giữa môi trường trong container và host.</p>
<pre><code class="language-shell">docker run -dp 127.0.0.1:3000:3000 \
    -w /app --mount type=bind,src=&quot;$(pwd)&quot;,target=/app \
    node:18-alpine \
    sh -c &quot;yarn install &amp;&amp; yarn run dev&quot;


 docker logs -f &lt;container-id&gt;
</code></pre>
<p><a href="https://docs.docker.com/get-started/06_bind_mounts/">For more</a></p>
<h2 id="multi-container-apps"><a class="header" href="#multi-container-apps">Multi container apps</a></h2>
<p>Target là mỗi ứng dụng sẽ chạy 1 container riêng lẽ, dễ dàng cho quản lý và update.</p>
<p><a href="https://docs.docker.com/get-started/07_multi_container/">For more</a></p>
<ul>
<li>Tạo 1 network để các container có thể tương tác với nhau</li>
</ul>
<pre><code class="language-shell">docker network create todo-app
</code></pre>
<ul>
<li>Tạo 1 container MYSQL và attach nó vào network vừa tạo</li>
</ul>
<pre><code class="language-shell">docker run -d \
    --network todo-app --network-alias mysql \
    -v todo-mysql-data:/var/lib/mysql \
    -e MYSQL_ROOT_PASSWORD=secret \
    -e MYSQL_DATABASE=todos \
    mysql:8.0

</code></pre>
<ul>
<li>Confirm</li>
</ul>
<pre><code class="language-shell">docker exec -it &lt;mysql-container-id&gt; mysql -u root -p

mysql&gt; SHOW DATABASES;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
| sys                |
| todos              |
+--------------------+
5 rows in set (0.00 sec)

mysql&gt; exit

</code></pre>
<h3 id="xác-định-địa-chỉ-ip-các-container"><a class="header" href="#xác-định-địa-chỉ-ip-các-container">Xác định địa chỉ IP các container</a></h3>
<pre><code class="language-shell">docker run -it --network todo-app nicolaka/netshoot

dig mysql

; &lt;&gt; DiG 9.18.8 &lt;&gt; mysql
;; global options: +cmd
;; Got answer:
;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 32162
;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0

;; QUESTION SECTION:
;mysql.    IN A

;; ANSWER SECTION:
mysql.   600 IN A 172.23.0.2

;; Query time: 0 msec
;; SERVER: 127.0.0.11#53(127.0.0.11)
;; WHEN: Tue Oct 01 23:47:24 UTC 2019
;; MSG SIZE  rcvd: 44
</code></pre>
<h3 id="run-app-with-mysql"><a class="header" href="#run-app-with-mysql">run app with mysql</a></h3>
<pre><code class="language-shell">docker run -dp 127.0.0.1:3000:3000 \
  -w /app -v &quot;$(pwd):/app&quot; \
  --network todo-app \
  -e MYSQL_HOST=mysql \
  -e MYSQL_USER=root \
  -e MYSQL_PASSWORD=secret \
  -e MYSQL_DB=todos \
  node:18-alpine \
  sh -c &quot;yarn install &amp;&amp; yarn run dev&quot;


</code></pre>
<p>có thể dùng <strong>docker logs -f &lt;container-id&gt;</strong>  xem log</p>
<ul>
<li>check:</li>
</ul>
<pre><code class="language-shell">docker exec -it &lt;mysql-container-id&gt; mysql -p todos


mysql&gt; select * from todo_items;
+--------------------------------------+--------------------+-----------+
| id                                   | name               | completed |
+--------------------------------------+--------------------+-----------+
| c906ff08-60e6-44e6-8f49-ed56a0853e85 | Do amazing things! |         0 |
| 2912a79e-8486-4bc3-a4c5-460793a575ab | Be awesome!        |         0 |
+--------------------------------------+--------------------+-----------+


</code></pre>
<h2 id="docker-compose"><a class="header" href="#docker-compose">Docker compose</a></h2>
<p>haizz viết 1 hồi lại thấy <a href="https://docs.docker.com/get-started/08_using_compose/">Docs</a> dễ hiểu hơn hẳn =.= khum cần phải viết thêm</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../blogs/Docker/tips.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../../blogs/Docker/dockerfile_write.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../blogs/Docker/tips.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../blogs/Docker/dockerfile_write.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
