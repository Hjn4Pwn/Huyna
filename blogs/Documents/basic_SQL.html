<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js dark">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>MySQL - Hjn4 Blog</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../theme/css/additional.css">

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "dark";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('dark')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="../../homepage.html">HOME - Huy Na</a></li><li class="chapter-item affix "><li class="part-title">AWS</li><li class="chapter-item "><a href="../../blogs/AWS/job.html">Requirements For Job</a></li><li class="chapter-item "><a href="../../blogs/AWS/EC2.html">Computing Services - EC2</a></li><li class="chapter-item "><a href="../../blogs/AWS/IAM.html">Identity and Access Management -IAM</a></li><li class="chapter-item "><a href="../../blogs/AWS/S3.html">Simple Storage Service - S3</a></li><li class="chapter-item "><a href="../../blogs/AWS/LoadBalancing-Autoscaling.html">Load Balancing and Autoscaling</a></li><li class="chapter-item "><a href="../../blogs/AWS/RDS.html">Relational Database Service - RDS</a></li><li class="chapter-item "><a href="../../blogs/AWS/DynamoDB.html">Database Services - No SQL - DynamoDB</a></li><li class="chapter-item "><a href="../../blogs/AWS/Lambda.html">Serverless Lambda</a></li><li class="chapter-item "><a href="../../blogs/AWS/VPC.html">Networking Service - VPC, Peering, Endpoint</a></li><li class="chapter-item "><a href="../../blogs/AWS/Gateway_Cognito.html">API Gateway & Cognito</a></li><li class="chapter-item "><a href="../../blogs/AWS/CloudFront.html">Content Delivery Service (CDN) - CloudFront</a></li><li class="chapter-item "><a href="../../blogs/AWS/Route_53.html">Domain Name System - Route 53</a></li><li class="chapter-item "><a href="../../blogs/AWS/Monitor_Auditing.html">Monitoring and Auditing - CloudWatch, CloudTrail</a></li><li class="chapter-item "><a href="../../blogs/AWS/Mess.html">Messaging Service - SNS, SQS, SES</a></li><li class="chapter-item "><a href="../../blogs/AWS/Event_Bridge.html">Event Bridge</a></li><li class="chapter-item "><a href="../../blogs/AWS/Elastic_Beanstalk.html">Elastic Beanstalk</a></li><li class="chapter-item "><a href="../../blogs/AWS/Container_Service.html">Container Service - ECS, ECR</a></li><li class="chapter-item "><a href="../../blogs/AWS/IAC_CloudFormation.html">Infra as Code - CloudFormation</a></li><li class="chapter-item "><a href="../../blogs/AWS/Backup_Recovery.html">Backup and Recovery</a></li><li class="chapter-item "><a href="../../blogs/AWS/Sec.html">Security Services</a></li><li class="chapter-item affix "><li class="part-title">Intern</li><li class="chapter-item "><a href="../../blogs/Intern/HTML.html">HTML</a></li><li class="chapter-item "><a href="../../blogs/Intern/CSS.html">CSS</a></li><li class="chapter-item affix "><li class="part-title">PHP</li><li class="chapter-item "><a href="../../blogs/PHP/setup_env.html">Setup Environment</a></li><li class="chapter-item "><a href="../../blogs/PHP/basic.html">Basic Concepts</a></li><li class="chapter-item "><a href="../../blogs/PHP/mysqli.html">MySQLi</a></li><li class="chapter-item "><a href="../../blogs/PHP/sort_algorithms.html">Sort Algorithms</a></li><li class="chapter-item "><a href="../../blogs/PHP/hackerrank_algorithms.html">Hackerrank</a></li><li class="chapter-item "><a href="../../blogs/PHP/Interview.html">Interview</a></li><li class="chapter-item "><a href="../../blogs/PHP/oop.html">OOP</a></li><li class="chapter-item "><a href="../../blogs/PHP/dsa.html">DSA</a></li><li class="chapter-item affix "><li class="part-title">Laravel</li><li class="chapter-item "><a href="../../blogs/Laravel/setup_env.html">Setup Environment</a></li><li class="chapter-item "><a href="../../blogs/Laravel/artisanCommand.html">Artisan Command</a></li><li class="chapter-item "><a href="../../blogs/Laravel/Takenote.html">Take note 1</a></li><li class="chapter-item "><a href="../../blogs/Laravel/Takenote2.html">Take note 2</a></li><li class="chapter-item "><a href="../../blogs/Laravel/Takenote3.html">Take note 3</a></li><li class="chapter-item "><a href="../../blogs/Laravel/Takenote4.html">Take note 4</a></li><li class="chapter-item "><a href="../../blogs/Laravel/advance_concepts.html">Advance Concepts</a></li><li class="chapter-item "><a href="../../blogs/Laravel/database.html">Database</a></li><li class="chapter-item "><a href="../../blogs/Laravel/explain_functions.html">Explain Functions</a></li><li class="chapter-item "><a href="../../blogs/Laravel/Interview.html">Basic Concepts</a></li><li class="chapter-item affix "><li class="part-title">WordPress</li><li class="chapter-item "><a href="../../blogs/Wordpress/basic.html">Basic Concepts</a></li><li class="chapter-item "><a href="../../blogs/Wordpress/plugin_dev.html">Plugin Development</a></li><li class="chapter-item affix "><li class="part-title">Kubernetes</li><li class="chapter-item "><a href="../../blogs/Kubernetes/session1.html">Basic Concepts</a></li><li class="chapter-item "><a href="../../blogs/Kubernetes/commands.html">Practice on KodeKloud</a></li><li class="chapter-item "><a href="../../blogs/Kubernetes/minkube_deployment.html">MiniKube Deployment</a></li><li class="chapter-item "><a href="../../blogs/Kubernetes/data_volume.html">Manage Data & Volumes</a></li><li class="chapter-item "><a href="../../blogs/Kubernetes/network.html">Network</a></li><li class="chapter-item affix "><li class="part-title">Linux + Git</li><li class="chapter-item "><a href="../../blogs/Linux/bandit.html">Bandit challenge</a></li><li class="chapter-item "><a href="../../blogs/Linux/command_session_1.html">Command session 1</a></li><li class="chapter-item "><a href="../../blogs/Linux/git_command.html">Git command</a></li><li class="chapter-item "><a href="../../blogs/Linux/ssh.html">SSH</a></li><li class="chapter-item "><a href="../../blogs/Linux/conda.html">Conda</a></li><li class="chapter-item affix "><li class="part-title">Docker</li><li class="chapter-item "><a href="../../blogs/Docker/tips.html">Some docker tips for CTF</a></li><li class="chapter-item "><a href="../../blogs/Docker/get_started.html">Basic Docker</a></li><li class="chapter-item "><a href="../../blogs/Docker/image_container.html">Images & Containers: The Core Building Blocks</a></li><li class="chapter-item "><a href="../../blogs/Docker/dockerfile_write.html">Dockerfile</a></li><li class="chapter-item "><a href="../../blogs/Docker/docker_network.html">Docker Network</a></li><li class="chapter-item "><a href="../../blogs/Docker/Volume.html">Volume</a></li><li class="chapter-item "><a href="../../blogs/Docker/Docker_Compose.html">Docker Compose</a></li><li class="chapter-item affix "><li class="part-title">Terraform</li><li class="chapter-item "><a href="../../blogs/Terraform/overview.html">Overview</a></li><li class="chapter-item "><a href="../../blogs/Terraform/functional_pro.html">Functional Programming</a></li><li class="chapter-item "><a href="../../blogs/Terraform/Module_create_VPC.html">Terraform Module: Create VPC on AWS</a></li><li class="chapter-item affix "><li class="part-title">Jenkins</li><li class="chapter-item "><a href="../../blogs/Jenkins/install_by_docker.html">Install Jenkins By Docker</a></li><li class="chapter-item "><a href="../../blogs/Jenkins/link_git_jenkins.html">Link git with jenkins</a></li><li class="chapter-item "><a href="../../blogs/Jenkins/pipline_github_jenkins.html">Pipeline jenkinsfile with github</a></li><li class="chapter-item "><a href="../../blogs/Jenkins/gitlab_jenkins.html">Link gitlab with Jenkins</a></li><li class="chapter-item "><a href="../../blogs/Jenkins/gitlab_dockerhub.html">Gitlab-dockerhub-pipeline</a></li><li class="chapter-item affix "><li class="part-title">CSS</li><li class="chapter-item "><a href="../../blogs/CSS/basic.html">Basic Concepts</a></li><li class="chapter-item "><a href="../../blogs/CSS/flexbox.html">Flexbox CSS</a></li><li class="chapter-item "><a href="../../blogs/CSS/BEM.html">BEM</a></li><li class="chapter-item "><a href="../../blogs/CSS/responsive.html">Resposive</a></li><li class="chapter-item "><a href="../../blogs/CSS/tranform_sitsion_anima.html">Transform - Transition - Animation</a></li><li class="chapter-item affix "><li class="part-title">JS</li><li class="chapter-item "><a href="../../blogs/JS/basic.html">Basic Concepts 1</a></li><li class="chapter-item "><a href="../../blogs/JS/dom.html">DOM</a></li><li class="chapter-item "><a href="../../blogs/JS/basic2.html">Basic Concepts 2</a></li><li class="chapter-item "><a href="../../blogs/JS/jquery.html">jQuery</a></li><li class="chapter-item affix "><li class="part-title">Python</li><li class="chapter-item "><a href="../../blogs/Python/RE.html">Regular Expression</a></li><li class="chapter-item "><a href="../../blogs/Python/Automation_1.html">Automation with Python 1</a></li><li class="chapter-item affix "><li class="part-title">Bash script</li><li class="chapter-item "><a href="../../blogs/Bash_script/Variables_Environment.html">Shell Variables and Environment</a></li><li class="chapter-item "><a href="../../blogs/Bash_script/Conditionals_Execution.html">Conditionals Execution</a></li><li class="chapter-item "><a href="../../blogs/Bash_script/Bash_Loops.html">Bash Loops & Function</a></li><li class="chapter-item "><a href="../../blogs/Bash_script/Shell_Redirection.html">Shell Redirection & Pipes and Filters</a></li><li class="chapter-item "><a href="../../blogs/Bash_script/Interactive_Scripts.html">Interactive Scripts</a></li><li class="chapter-item affix "><li class="part-title">System and Network Administration</li><li class="chapter-item "><a href="../../blogs/Network/basic_network_1.html">Basic Network 1</a></li><li class="chapter-item affix "><li class="part-title">PWN</li><li class="chapter-item "><a href="../../blogs/PWN/Emporium_ROP.html">Rop Emporium</a></li><li class="chapter-item "><a href="../../blogs/PWN/pwnableTW.html">Pwnable.tw</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pico_CTF.html">Pwn_PicoCTF</a></li><li class="chapter-item "><a href="../../blogs/PWN/PWN_from_blabla.html">Pwn from blabla</a></li><li class="chapter-item affix "><li class="part-title">ROP Emporium</li><li class="chapter-item "><a href="../../blogs/PWN/ROP_Emporium/ret2win_challenge.html">ret2win - chall 1</a></li><li class="chapter-item "><a href="../../blogs/PWN/ROP_Emporium/split_challenge.html">split - chall 2</a></li><li class="chapter-item "><a href="../../blogs/PWN/ROP_Emporium/callme_challenge.html">callme - chall 3</a></li><li class="chapter-item "><a href="../../blogs/PWN/ROP_Emporium/write4_challenge.html">write4 - chall 4</a></li><li class="chapter-item "><a href="../../blogs/PWN/ROP_Emporium/badchars_challenge.html">badchars - chall 5</a></li><li class="chapter-item "><a href="../../blogs/PWN/ROP_Emporium/pivot_challenge.html">pivot - chall 7</a></li><li class="chapter-item "><a href="../../blogs/PWN/ROP_Emporium/ret2csu_challenge.html">ret2csu - chall 8</a></li><li class="chapter-item affix "><li class="part-title">Pwnable.tw</li><li class="chapter-item "><a href="../../blogs/PWN/Pwnable_tw/start_challenge.html">start</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwnable_tw/orw_challenge.html">orw</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwnable_tw/calc_challenge.html">calc</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwnable_tw/3x17_challenge.html">3x17</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwnable_tw/dubblesort_challenge.html">dubblesort</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwnable_tw/silver_bullet_challenge.html">silver_bullet</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwnable_tw/applestore_challenge.html">applestore</a></li><li class="chapter-item affix "><li class="part-title">Pwn_Pico</li><li class="chapter-item "><a href="../../blogs/PWN/Pwn_Pico/herelibc_challenge.html">Here's a libc</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwn_Pico/hijacking_challenge.html">hijacking</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwn_Pico/fermat_strins_challenge.html">fermat_strings</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwn_Pico/Guessgame_challenge.html">Guessgame</a></li><li class="chapter-item affix "><li class="part-title">Pwn from blabla</li><li class="chapter-item "><a href="../../blogs/PWN/Pwn_from_blabla/handy_shellcode_challenge.html">handy shellcode</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwn_from_blabla/pwn07_challenge.html">pwn07 - ret2libc vs ROP</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwn_from_blabla/got_formatstring_challenge.html">GOT overwrite with format string</a></li><li class="chapter-item "><a href="../../blogs/PWN/Pwn_from_blabla/training.html">training</a></li><li class="chapter-item affix "><li class="part-title">Assembly</li><li class="chapter-item "><a href="../../blogs/Assembly/ASM.html">ASM</a></li><li class="chapter-item "><a href="../../blogs/Assembly/Session_1.html">Session 1</a></li><li class="chapter-item "><a href="../../blogs/Assembly/Session_2.html">Session 2</a></li><li class="chapter-item "><a href="../../blogs/Assembly/Session_3.html">Session 3</a></li><li class="chapter-item affix "><li class="part-title">RE_PicoCTF</li><li class="chapter-item "><a href="../../blogs/RE/RE.html">RE</a></li><li class="chapter-item "><a href="../../blogs/RE_Pico/ARMssembly_0.html">ARMssembly 0</a></li><li class="chapter-item "><a href="../../blogs/RE_Pico/ARMssembly_1.html">ARMssembly 1</a></li><li class="chapter-item "><a href="../../blogs/RE_Pico/ARMssembly_2.html">ARMssembly 2</a></li><li class="chapter-item affix "><li class="part-title">Documents from everywhere</li><li class="chapter-item "><a href="../../blogs/Documents/troubleshooting.html">Troubleshooting</a></li><li class="chapter-item "><a href="../../blogs/Documents/study.html">Study</a></li><li class="chapter-item "><a href="../../blogs/Documents/important_concept.html">Important Concepts</a></li><li class="chapter-item expanded "><a href="../../blogs/Documents/basic_SQL.html" class="active">MySQL</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Hjn4 Blog</h1>

                    <div class="right-buttons">

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="sql"><a class="header" href="#sql">SQL</a></h1>
<p><a href="https://github.com/Hjn4Pwn/SQL.git">For More</a></p>
<h2 id="một-số-constraint"><a class="header" href="#một-số-constraint">Một số constraint</a></h2>
<ul>
<li><strong>NOT NULL</strong>: Không cho phép giá trị Null</li>
<li><strong>UNIQUE</strong>: Mỗi giá trị là duy nhất</li>
<li><strong>PRIMARY KEY</strong>: Khóa chính (NOT NULL &amp; UNIQUE)</li>
<li><strong>FOREIGN KEY</strong>: Khóa ngoại (tham chiếu sang table khác)</li>
<li><strong>CHECK</strong>: Kiểm tra dựa vào điều kiện</li>
<li><strong>DEFAULT</strong>: Quy định giá trị mặc định có trường (nếu không input)</li>
</ul>
<pre><code class="language-sql">CREATE TABLE persons (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    email VARCHAR(100) UNIQUE,
    age INT DEFAULT 0 CHECK (age &gt;= 18),
    city VARCHAR(255) DEFAULT 'huyna'
);
</code></pre>
<p><em>Việc add constraint + name giúp có thể đặt tên cho ràng buộc, tường minh hơn</em></p>
<p>VD:</p>
<pre><code class="language-sql">alter table NHANVIEN add constraint PK_NV
primary key (MANV)

alter table CTHD add constraint FK_CT_SP
foreign key (MASP) references
SANPHAM(MASP)

alter table SANPHAM add constraint
CK_GIA check (GIA &gt;=500)

alter table KHACHHANG add constraint
UQ_KH unique (CMND)

-- delete constraint
alter table SANPHAM drop constraint CK_GIA;
</code></pre>
<h2 id="các-kiểu-dữ-liệu-thông-dụng"><a class="header" href="#các-kiểu-dữ-liệu-thông-dụng">Các kiểu dữ liệu thông dụng</a></h2>
<ul>
<li>char</li>
<li>varchar</li>
<li>text</li>
<li>longtext</li>
<li>int</li>
<li>bigint</li>
<li>float</li>
<li>double</li>
<li>date</li>
<li>datetime</li>
<li>timestamp</li>
<li>time</li>
</ul>
<h2 id="tạo-và-xóa-db"><a class="header" href="#tạo-và-xóa-db">Tạo và xóa DB</a></h2>
<pre><code class="language-sql">create database learn_mysql;
drop database learn_mysql;

use learn_mysql; -- use database 
</code></pre>
<h2 id="khóa-chính--khóa-ngoại"><a class="header" href="#khóa-chính--khóa-ngoại">Khóa chính &amp; Khóa ngoại</a></h2>
<h3 id="khóa-chính"><a class="header" href="#khóa-chính">Khóa chính</a></h3>
<pre><code class="language-sql">create table users(
    id int auto_increment primary key,
    username varchar(50),
    password varchar(255),
    -- primary key(id)
    -- primary key(id_A, id_B)
    -- constraint PK_Combine primary key(id, username)
);

alter table users
add primary key(id);

</code></pre>
<h3 id="khóa-ngoại"><a class="header" href="#khóa-ngoại">Khóa ngoại</a></h3>
<ul>
<li>Khóa ngoại là cột của bảng A tham chiếu đến khóa chính của bảng B</li>
</ul>
<pre><code class="language-sql">create table customer(
    id int auto_increment primary key,
    name varchar(40),
    address varchar(255),
);

create table orders(
    id int auto_increment primary key,
    staff varchar(50),
    customer_id int,
    foreign key (customer_id) references customers(id)
);

-- dùng khi đã tạo bảng rồi và muốn add fk
alter table orders
add constraint fk_orders_customers -- đặt tên cho fk
add foreign key (customer_id) references customers(id);

</code></pre>
<h2 id="table"><a class="header" href="#table">Table</a></h2>
<pre><code class="language-sql">-- create table

-- Thêm cột mới vào bảng
alter table table_name
add new_col col_definition [first | after column name];

alter table products
add description varchar(255);

-- Chỉnh sửa cột
alter table table_name
modify col_name col_definition;

alter table products
modify id varchar(10);

-- Đổi tên cột
alter table table_name change column old_name new_name col_definition;

alter table products
change column description price float;

-- Xóa cột
alter table table_name drop column col_name;

alter table products drop price;

-- delete table
drop table table_name1, table_name2;

</code></pre>
<h2 id="thao-tác-với-dữ-liệu"><a class="header" href="#thao-tác-với-dữ-liệu">Thao tác với dữ liệu</a></h2>
<h3 id="inset"><a class="header" href="#inset">Inset</a></h3>
<pre><code class="language-sql">INSERT INTO NHANVIEN(MANV,HOTEN,SODT,NGVL) 
VALUES 
('NV01','NGUYEN NHU NHUT','0927345678','13/04/2006'),
('NV02','LE THI PHI YEN','0987567390','21/04/2006'),
('NV03','NGUYEN VAN B','0997047382','27/04/2006'),
('NV04','NGO THANH TUAN','0913758498','24/06/2006'),
('NV05','NGUYEN THI TRUC THANH','0918590387','20/07/2006')

</code></pre>
<h3 id="update"><a class="header" href="#update">Update</a></h3>
<pre><code class="language-sql">UPDATE KHACHHANG1 SET LOAIKH='VIP' WHERE (NGDK&lt;'01/01/2007'AND DOANHSO &gt;10000000  )
OR  (NGDK&gt;='01/01/2007'AND DOANHSO &gt;2000000  )

</code></pre>
<h3 id="delete"><a class="header" href="#delete">Delete</a></h3>
<p>...</p>
<h2 id="index"><a class="header" href="#index">Index</a></h2>
<p>Index là một cấu trúc dữ liệu giúp xác định nhanh chóng các records trong table.</p>
<p>Hiểu một cách đơn giản thì nếu không có index thì SQL phải scan toàn bộ table để tìm được các records có liên quan. Dữ liệu càng lớn, tốc độ query sẽ càng chậm.</p>
<ul>
<li>
<p><strong>Ưu điểm</strong></p>
<ul>
<li>Ưu điểm của index là tăng tốc độ tìm kiếm records theo câu lệnh WHERE.</li>
<li>Không chỉ giới hạn trong câu lệnh SELECT mà với cả xử lý UPDATE hay DELETE có điều kiện WHERE.</li>
</ul>
</li>
<li>
<p><strong>Nhược điểm</strong></p>
<ul>
<li>Khi sử dụng index thì tốc độ của những xử lý ghi dữ liệu (Insert, Update, Delete) sẽ bị chậm đi.</li>
<li>Vì ngoài việc thêm hay update thông tin data thì MYSQL cũng cần update lại thông tin index của bảng tương ứng.</li>
<li>Do vậy với những table hay có xử lý insert, update hoặc delete và cần tốc độ xử lý nhanh thì không nên được đánh index.</li>
<li>Ngoài ra việc đánh index cũng sẽ tốn resource của server như thêm dung lượng cho CSDL.</li>
</ul>
</li>
</ul>
<h3 id="các-kiểu-index"><a class="header" href="#các-kiểu-index">Các kiểu index</a></h3>
<ul>
<li>MySQL cung cấp 3 kiểu index khác nhau cho data đó là B-Tree, Hash và R-Tree index.</li>
<li>Do R-Tree được sử dụng cho các loại dữ liệu hình học không gian Spatial data và thường ít khi gặp phải nên bài viết này chúng ta sẽ tập chung vào 2 loại index là B-Tree và Hash.</li>
</ul>
<h3 id="b-tree-index"><a class="header" href="#b-tree-index">B-Tree index</a></h3>
<p><img src="images/b-tree.png" alt="alt text" /></p>
<p>B-Tree (Balanced Tree) là một cấu trúc dữ liệu dạng cây được tổ chức sao cho dữ liệu được lưu trữ trong một cấu trúc phân cấp. Đặc điểm nổi bật của B-Tree là mọi đường dẫn từ gốc đến lá đều có cùng độ sâu, đảm bảo cây luôn cân bằng. Điều này giúp duy trì hiệu suất tìm kiếm, chèn, xóa ổn định, thường là O(log n).</p>
<p>Thông thường khi nói đến index mà không chỉ rõ loại index thì default là sẽ sử dụng B-Tree index.</p>
<pre><code class="language-sql">-- Create index
CREATE INDEX id_index ON table_name (column_name[, column_name…]) USING BTREE;

-- Or
ALTER TABLE table_name ADD INDEX id_index (column_name[, column_name…])

-- Drop index
DROP INDEX index_name ON table_name

</code></pre>
<p><strong>Cấu trúc của B-Tree:</strong></p>
<ul>
<li>Nút gốc (Root Node): Là nút đầu tiên và cao nhất trong cây.</li>
<li>Nút lá (Leaf Node): Là các nút cuối cùng ở đáy cây, nơi lưu trữ các giá trị dữ liệu thực tế hoặc con trỏ đến dữ liệu.</li>
<li>Nút trung gian (Internal Node): Nằm giữa nút gốc và nút lá, chứa các khóa (keys) để định hướng việc tìm kiếm, đồng thời chứa con trỏ trỏ đến các nút con.</li>
</ul>
<p><strong>Cách hoạt động:</strong></p>
<ul>
<li>Khi thực hiện tìm kiếm một giá trị trong cột có sử dụng B-Tree index, MySQL bắt đầu từ nút gốc. Dựa trên giá trị của các khóa, nó xác định hướng đi xuống để tìm nút con tương ứng.</li>
<li>Quá trình này tiếp diễn cho đến khi tìm được nút lá chứa giá trị cần tìm hoặc kết luận giá trị đó không tồn tại.</li>
<li>B-Tree có khả năng cân bằng tự động, vì vậy khi dữ liệu được chèn hoặc xóa, cây sẽ tự tái cấu trúc để duy trì hiệu suất tìm kiếm.</li>
</ul>
<p><strong>Ưu và nhược điểm:</strong></p>
<ul>
<li>
<p><strong>Ưu điểm</strong>:</p>
<ul>
<li>Hiệu quả với các truy vấn có điều kiện như =, &gt;, &lt;, &gt;=, &lt;=, và các truy vấn có phạm vi (BETWEEN, LIKE với điều kiện bắt đầu bằng ký tự).</li>
<li>Đảm bảo truy vấn ổn định với hiệu suất O(log n).</li>
<li>Hỗ trợ sắp xếp dữ liệu tự nhiên, do đó có thể tối ưu hóa truy vấn ORDER BY.</li>
</ul>
</li>
<li>
<p><strong>Nhược điểm</strong>:</p>
<ul>
<li>Khi bảng có quá nhiều chèn/xóa, cấu trúc B-Tree có thể phải tái cấu trúc nhiều lần, gây giảm hiệu suất tạm thời.</li>
<li>Với các truy vấn chính xác hoặc không thể sắp xếp (ví dụ, LIKE với ký tự wildcard đầu tiên), B-Tree không tối ưu bằng Hash Index.</li>
</ul>
</li>
</ul>
<h3 id="hash-index"><a class="header" href="#hash-index">Hash Index</a></h3>
<p><img src="images/hash-index.png" alt="alt text" /></p>
<p>Hash Index là một cấu trúc dữ liệu dựa trên bảng băm (hash table). Một hàm băm (hash function) được áp dụng trên giá trị của cột được index để tạo ra một khóa băm, sau đó khóa này được sử dụng để định vị vị trí lưu trữ dữ liệu trong bảng băm.</p>
<pre><code class="language-sql">-- Create index
CREATE INDEX id_index ON table_name (column_name[, column_name…]) USING HASH;

-- Or
ALTER TABLE table_name ADD INDEX id_index (column_name[, column_name…]) USING HASH;

</code></pre>
<p><strong>Cấu trúc của Hash Index:</strong>
- <strong>Hash Function:</strong> Chuyển đổi giá trị của cột được index thành một mã băm (hash code).
- <strong>Bucket:</strong> Mỗi khóa băm tương ứng với một bucket, chứa các con trỏ trỏ đến các dòng dữ liệu thực tế.</p>
<p><strong>Cách hoạt động:</strong>
- Khi thực hiện tìm kiếm, MySQL áp dụng hàm băm lên giá trị tìm kiếm để tạo ra một mã băm.
- Sau đó, MySQL sử dụng mã băm này để xác định bucket chứa dữ liệu thực tế.
- Nếu có nhiều mục dữ liệu với cùng một mã băm (xung đột băm), MySQL sẽ kiểm tra từng mục để tìm ra giá trị chính xác.</p>
<p><strong>Ưu và nhược điểm:</strong></p>
<ul>
<li>
<p><strong>Ưu điểm:</strong></p>
<ul>
<li>Tốc độ truy vấn cực nhanh cho các truy vấn chính xác (=).</li>
<li>Hiệu suất tìm kiếm là O(1) trong trường hợp không có xung đột băm.</li>
</ul>
</li>
<li>
<p><strong>Nhược điểm:</strong></p>
<ul>
<li>Không hỗ trợ các truy vấn phạm vi (ví dụ &gt;, &lt;, BETWEEN), vì hàm băm không duy trì trật tự.</li>
<li>Dễ xảy ra xung đột băm, điều này có thể làm giảm hiệu suất nếu không được xử lý tốt.</li>
<li>Không thể sử dụng cho các truy vấn với ORDER BY, vì dữ liệu không được lưu trữ theo bất kỳ thứ tự nào.</li>
</ul>
</li>
</ul>
<h3 id="cách-đánh-index"><a class="header" href="#cách-đánh-index">Cách đánh index</a></h3>
<h4 id="single-column-index"><a class="header" href="#single-column-index">Single-Column Index</a></h4>
<p><strong>Cách tạo:</strong> Giả sử bạn có một bảng users với các cột id, name, email, created_at. Bạn muốn tạo index trên cột email: <strong>CREATE INDEX idx_email ON users(email);</strong></p>
<p>Khi bạn thực hiện các truy vấn mà cột email nằm trong điều kiện WHERE, JOIN, hoặc ORDER BY, MySQL sẽ sử dụng index này để tìm kiếm nhanh hơn.</p>
<h4 id="multi-column-index"><a class="header" href="#multi-column-index">Multi-Column Index</a></h4>
<pre><code class="language-sql">CREATE INDEX idx_name ON users(last_name, first_name, dob);

</code></pre>
<p>Composite Index tuân theo quy tắc Leftmost Prefix, nghĩa là index sẽ hoạt động hiệu quả với các truy vấn sử dụng cột đầu tiên trong danh sách cột của index, sau đó là các cột tiếp theo theo thứ tự.</p>
<p><strong>Ví dụ: đánh index trên 3 cột a,b,c thì: truy vấn a, b, c hoặc a, b hoặc a là đúng và hiệu quả khi sử dụng Composite Index</strong></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../blogs/Documents/important_concept.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../blogs/Documents/important_concept.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
